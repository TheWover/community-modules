#!/usr/bin/env python3
from subprocess import PIPE, run, STDOUT
from tempfile import mkstemp
import base64

verbose = False
result = []

def vprint(status):
    global result
    result.append(status)
    if verbose:
        print(status)
        
def runOrchard():
    encoded = """Ly9BdXRob3IgQ29keSBUaG9tYXMsIEBpdHNfYV9mZWF0dXJlXwpPYmpDLmltcG9ydCgiRm91bmRhdGlvbiIpOwpPYmpDLmltcG9ydCgic3RkaW8iKTsKT2JqQy5pbXBvcnQoJ09wZW5EaXJlY3RvcnknKTsKLy9mb3IgYWxsIG9mIHRoZXNlLCB0aGVyZSBpcyBhIHN3aXRjaCB0byB1c2UgT2JqQyBjYWxscyB2cyB0ZXJtaW5hbCBjYWxscwpjdXJyQXBwID0gQXBwbGljYXRpb24uY3VycmVudEFwcGxpY2F0aW9uKCk7CmN1cnJBcHAuaW5jbHVkZVN0YW5kYXJkQWRkaXRpb25zID0gdHJ1ZTsKLy8gTG9va3VwIHRhYmxlcyBmb3IgZG9pbmcgT3BlbkRpcmVjdG9yeSBxdWVyaWVzIHZpYSBMREFQCnZhciBvYmplY3RfY2xhc3MgPSB7CgkiQXR0cmlidXRlVHlwZXMiOiAJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6QXR0cmlidXRlVHlwZXMiLAoJIkFGUFNlcnZlciI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6QUZQU2VydmVyIiwKCSJBbGlhc2VzIjogCQkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6QWxpYXNlcyIsCgkiQXVnbWVudHMiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOkF1Z21lbnRzIiwKCSJBdXRvbW91bnQiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOkF1dG9tb3VudCIsCgkiQXV0b21vdW50TWFwIjogCQkJImRzUmVjVHlwZVN0YW5kYXJkOkF1dG9tb3VudE1hcCIsCgkiQXV0b1NlcnZlclNldHVwIjogCQkJImRzUmVjVHlwZVN0YW5kYXJkOkF1dG9TZXJ2ZXJTZXR1cCIsCgkiQm9vdHAiOiAJCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpCb290cCIsCgkiQ2VydGlmaWNhdGVBdXRob3JpdGllcyI6IAkiZHNSZWNUeXBlU3RhbmRhcmQ6Q2VydGlmaWNhdGVBdXRob3JpdGllcyIsCgkiQ29tcHV0ZXJMaXN0cyI6IAkJCSJkc1JlY1R5cGVTdGFuZGFyZDpDb21wdXRlckxpc3RzIiwKCSJDb21wdXRlckdyb3VwcyI6IAkJCSJkc1JlY1R5cGVTdGFuZGFyZDpDb21wdXRlckdyb3VwcyIsCgkiQ29tcHV0ZXJzIjogCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpDb21wdXRlcnMiLAoJIkNvbmZpZ3VyYXRpb24iOiAJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6Q29uZmlnIiwKCSJFdGhlcm5ldHMiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOkV0aGVybmV0cyIsCgkiRmlsZU1ha2VyU2VydmVycyI6IAkJImRzUmVjVHlwZVN0YW5kYXJkOkZpbGVNYWtlclNlcnZlcnMiLAoJIkZUUFNlcnZlciI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6RlRQU2VydmVyIiwKCSJHcm91cHMiOiAJCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpHcm91cHMiLAoJIkhvc3RTZXJ2aWNlcyI6IAkJCSJkc1JlY1R5cGVTdGFuZGFyZDpIb3N0U2VydmljZXMiLAoJIkhvc3RzIjogCQkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6SG9zdHMiLAoJIkxEQVBTZXJ2ZXIiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOkxEQVBTZXJ2ZXIiLAoJIkxvY2F0aW9ucyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6TG9jYXRpb25zIiwKCSJNb3VudHMiOiAJCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpNb3VudHMiLAoJIk5GUyI6IAkJCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpORlMiLAoJIk5ldERvbWFpbnMiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOk5ldERvbWFpbnMiLAoJIk5ldEdyb3VwcyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6TmV0R3JvdXBzIiwKCSJOZXR3b3JrcyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6TmV0d29ya3MiLAoJIlBhc3N3b3JkU2VydmVyIjogCQkJImRzUmVjVHlwZVN0YW5kYXJkOlBhc3N3b3JkU2VydmVyIiwKCSJQZW9wbGUiOiAJCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpQZW9wbGUiLAoJIlBsdWdpbnMiOiAJCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpQbHVnaW5zIiwKCSJQcmVzZXRDb21wdXRlcnMiOiAJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6UHJlc2V0Q29tcHV0ZXJzIiwKCSJQcmVzZXRDb21wdXRlckdyb3VwcyI6IAkiZHNSZWNUeXBlU3RhbmRhcmQ6UHJlc2V0Q29tcHV0ZXJHcm91cHMiLAoJIlByZXNldENvbXB1dGVyTGlzdHMiOiAJCSJkc1JlY1R5cGVTdGFuZGFyZDpQcmVzZXRDb21wdXRlckxpc3RzIiwKCSJQcmVzZXRHcm91cHMiOiAJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6UHJlc2V0R3JvdXBzIiwKCSJQcmVzZXRVc2VycyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6UHJlc2V0VXNlcnMiLAoJIlByaW50U2VydmljZSI6IAkJCSJkc1JlY1R5cGVTdGFuZGFyZDpQcmludFNlcnZpY2UiLAoJIlByaW50U2VydmljZVVzZXIiOiAJCSJkc1JlY1R5cGVTdGFuZGFyZDpQcmludFNlcnZpY2VVc2VyIiwKCSJQcmludGVycyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6UHJpbnRlcnMiLAoJIlByb3RvY29scyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6UHJvdG9jb2xzIiwKCSJRVFNTZXJ2ZXIiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOlFUU1NlcnZlciIsCgkiUmVjb3JkVHlwZXMiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOlJlY29yZFR5cGVzIiwKCSJSZXNvdXJjZXMiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOlJlc291cmNlcyIsCgkiUlBDIjogCQkJCQkJImRzUmVjVHlwZVN0YW5kYXJkOlJQQyIsCgkiU01CU2VydmVyIjogCQkJCSJkc1JlY1R5cGVTdGFuZGFyZDpTTUJTZXJ2ZXIiLAoJIlNlcnZlciI6IAkJCQkJImRzUmVjVHlwZVN0YW5kYXJkOlNlcnZlciIsCgkiU2VydmljZXMiOiAJCQkJImRzUmVjVHlwZVN0YW5kYXJkOlNlcnZpY2VzIiwKCSJTaGFyZVBvaW50cyI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6U2hhcmVQb2ludHMiLAoJIlVzZXJBdXRoZW50aWNhdGlvbkRhdGEiOiAJImRzUmVjVHlwZVN0YW5kYXJkOlVzZXJBdXRoZW50aWNhdGlvbkRhdGEiLAoJIlVzZXJzIjogCQkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6VXNlcnMiLAoJIldlYlNlcnZlciI6IAkJCQkiZHNSZWNUeXBlU3RhbmRhcmQ6V2ViU2VydmVyIiwJCn0KdmFyIG1hdGNoX3R5cGUgPSB7CgkiQW55IjogCQkJMHgwMSwvLyQua09ETWF0Y2hBbnksCgkiQmVnaW5zV2l0aCI6IAkweDIwMDIsLy8kLmtPRE1hdGNoSW5zZW5zaXRpdmVCZWdpbnNXaXRoLAoJIkVuZHNXaXRoIjogCTB4MjAwMywvLyQua09ETWF0Y2hJbnNlbnNpdGl2ZUVuZHNXaXRoLAoJIkNvbnRhaW5zIjogCTB4MjAwNCwvLyQua09ETWF0Y2hJbnNlbnNpdGl2ZUNvbnRhaW5zLAoJIkVxdWFsVG8iOiAJCTB4MjAwMSwvLyQua09ETWF0Y2hJbnNlbnNpdGl2ZUVxdWFsVG8sCgkiTGVzc1RoYW4iOiAJMHgyMDA3LC8vJC5rT0RNYXRjaExlc3NUaGFuLAoJIkdyZWF0ZXJUaGFuIjogCTB4MjAwNiwvLyQua09ETWF0Y2hHcmVhdGVyVGhhbgp9CnZhciBhdHRyaWJ1dGVzX2xpc3QgPSB7CgkiYWxsIjogCQkJCQkJCVsiIiwJCQkJCQkJCSJkc0F0dHJpYnV0ZXNBbGwiXSwKCSIqIjogCQkJCQkJCVsiIiwJCQkJCQkJCSJkc0F0dHJpYnV0ZXNBbGwiXSwKCSJhY2NvdW50cG9saWN5ZGF0YSI6IAkJCVsiYWNjb3VudFBvbGljeURhdGEiLAkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJhY2NvdW50ZXhwaXJlcyI6IAkJCQlbImFjY291bnRFeHBpcmVzIiwJCQkJIAkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJhZG1pbmNvdW50IjogCQkJCQlbImFkbWluQ291bnQiLAkJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImFkbWlubGltaXRzIjogCQkJCQlbIkFkbWluTGltaXRzIiwgCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImFsdHNlY3VyaXR5aWRlbnRpdGllcyI6IAkJWyJBbHRTZWN1cml0eUlkZW50aXRpZXMiLAkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sIC8veDUwOQoJImFmcF9ndWVzdGFjY2VzcyI6IAkJCQlbImFmcF9ndWVzdGFjY2VzcyIsCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJhZnBfbmFtZSI6IAkJCQkJWyJhZnBfbmFtZSIsCQkJCQkgCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImFmcF9zaGFyZWQiOiAgCQkJCQlbImFmcF9zaGFyZWQiLAkJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImF1dGhlbnRpY2F0aW9uaGludCI6IAkJCVsiQXV0aGVudGljYXRpb25IaW50IiwgCQkJCSJkc0F0dHJ0eXBlU3RhbmRhcmQ6Il0sCgkiYmFkcGFzc3dvcmR0aW1lIjogCQkJCVsiYmFkUGFzc3dvcmRUaW1lIiwJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImJhZHB3ZGNvdW50IjogCQkJCQlbImJhZFB3ZENvdW50IiwJCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJib290ZmlsZSI6IAkJCQkJWyJCb290RmlsZSIsIAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiYm9vdHBhcmFtcyI6IAkJCQkJWyJCb290UGFyYW1zIiwgCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJjYWNlcnRpZmljaWF0ZSI6IAkJCQlbIkNBQ2VydGlmaWNhdGUiLCAJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiY2FwYWNpdHkiOiAJCQkJCVsiQ2FwYWNpdHkiLCAJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImNhdGVnb3J5IjogCQkJCQlbIkNhdGVnb3J5IiwgCQkJCQkJImRzQXR0cnR5cGVTdGFuZGFyZDoiXSwKCSJjZXJ0aWZpY2F0ZXJldm9jYXRpb25saXN0IjogCVsiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdCIsIAkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJjb2RlcGFnZSI6IAkJCQkJWyJjb2RlUGFnZSIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiY29tbWVudCI6IAkJCQkJCVsiQ29tbWVudCIsCQkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiY29udGFjdGd1aWQiOiAJCQkJCVsiQ29udGFjdEdVSUQiLAkJCQkJCSJkc0F0dHJ0eXBlU3RhbmRhcmQ6Il0sCgkiY291bnRyeWNvZGUiOiAJCQkJCVsiY291bnRyeUNvZGUiLAkJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImNyZWF0aW9udGltZXN0YW1wIjogCQkJWyJDcmVhdGlvblRpbWVzdGFtcCIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiY3Jvc3NjZXJ0aWZpY2F0ZXBhaXIiOiAJCVsiQ3Jvc3NDZXJ0aWZpY2F0ZVBhaXIiLCAJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImNuIjogCQkJCQkJCVsiY24iLAkJCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiZnVsbG5hbWUiOiAJCQkJCVsiRnVsbE5hbWUiLAkJCQkJCSIiXSwgLy9oYXZlIHRvIHVzZSByZWFsbmFtZQoJImRpc3BsYXluYW1lIjogCQkJCQlbImRpc3BsYXlOYW1lIiwJCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJkaXN0aW5ndWlzaGVkbmFtZSI6IAkJCVsiZGlzdGluZ3Vpc2hlZE5hbWUiLAkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJkaXJlY3RvcnlfcGF0aCI6IAkJCQlbImRpcmVjdG9yeV9wYXRoIiwJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImRuc2RvbWFpbiI6IAkJCQkJWyJETlNEb21haW4iLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiZG5zbmFtZXNlcnZlciI6IAkJCQlbIkROU05hbWVTZXJ2ZXIiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJkc2NvcmVwcm9wYWdhdGlvbmRhdGEiOiAJCVsiZHNDb3JlUHJvcGFnYXRpb25EYXRhIiwJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJlbWFpbGFkZHJlc3MiOiAJCQkJWyJFTWFpbEFkZHJlc3MiLCAJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiZW5ldGFkZHJlc3MiOiAJCQkJCVsiRU5ldEFkZHJlc3MiLCAJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImV4cGlyZSI6IAkJCQkJCVsiRXhwaXJlIiwgCQkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiZmlyc3RuYW1lIjogCQkJCQlbIkZpcnN0TmFtZSIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJmdHBfbmFtZSI6IAkJCQkJWyJmdHBfbmFtZSIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiZ2VuZXJhdGVkdWlkIjogCQkJCVsiR2VuZXJhdGVkVUlEIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiZ3JvdXB0eXBlIjogCQkJCQlbImdyb3VwVHlwZSIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiaGFyZHdhcmV1dWlkIjogCQkJCVsiSGFyZHdhcmVVVUlEIiwgCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImhlaW1kYWxzcnBrZXkiOiAJCQkJWyJIZWltZGFsU1JQS2V5IiwgCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJpc2hpZGRlbiI6IAkJCQkJWyJJc0hpZGRlbiIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiaW5zdGFuY2V0eXBlIjogCQkJCVsiaW5zdGFuY2VUeXBlIiwJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImlzY3JpdGljYWxzeXN0ZW1vYmplY3QiOiAJCVsiaXNDcml0aWNhbFN5c3RlbU9iamVjdCIsCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiam9idGl0bGUiOiAJCQkJCVsiSm9iVGl0bGUiLCAJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImtlcmJlcm9za2V5cyI6IAkJCQlbIktlcmJlcm9zS2V5cyIsIAkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkia2VyYmVyb3NzZXJ2aWNlcyI6IAkJCVsiS2VyYmVyb3NTZXJ2aWNlcyIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sIC8vaG9zdCwgYWZwc2VydmVyLCBjaWZzLCB2bmMsIGV0YwoJImxhc3RuYW1lIjogCQkJCQlbIkxhc3ROYW1lIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImxhc3Rsb2dvZmYiOiAJCQkJCVsibGFzdExvZ29mZiIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkibGFzdGxvZ29uIjogCQkJCQlbImxhc3RMb2dvbiIsCQkJCQkgCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImxhc3Rsb2dvbnRpbWVzdGFtcCI6IAkJCVsibGFzdExvZ29uVGltZXN0YW1wIiwJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkibG9jYWxwb2xpY3lnbGFncyI6IAkJCVsibG9jYWxQb2xpY3lGbGFncyIsCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJImxvZ29uY291bnQiOiAJCQkJCVsibG9nb25Db3VudCIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkibG9nb25ob3VycyI6IAkJCQkJWyJsb2dvbkhvdXJzIiwJCQkJCSAJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkibGRhcHNlYXJjaGJhc2VzdWZmaXgiOiAJCVsiTERBUFNlYXJjaEJhc2VTdWZmaXgiLAkJCSJkc0F0dHJ0eXBlU3RhbmRhcmQ6Il0sCgkiYXV0b21vdW50bWFwIjogCQkJCVsiQXV0b21vdW50TWFwIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiYXBwbGVtZXRhbm9kZWxvY2F0aW9uIjogIAkJWyJBcHBsZU1ldGFOb2RlTG9jYXRpb24iLAkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiYXBwbGVtZXRhcmVjb3JkbmFtZSI6IAkJCVsiQXBwbGVNZXRhUmVjb3JkTmFtZSIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibWFjaGluZXNlcnZlcyI6IAkJCQlbIk1hY2hpbmVTZXJ2ZXMiLCAJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibWN4ZmxhZ3MiOiAJCQkJCVsiTUNYRmxhZ3MiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibWN4c2V0dGluZ3MiOiAJCQkJCVsiTUNYU2V0dGluZ3MiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibWlkZGxlbmFtZSI6IAkJCQkJWyJNaWRkbGVOYW1lIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJIm1lbWJlciI6IAkJCQkJCVsibWVtYmVyIiwJCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkibWVtYmVyb2YiOiAJCQkJCVsibWVtYmVyT2YiLAkJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJIm1lbWJlcnMiOiAJCQkJCQlbIm1lbWJlcnMiLAkJCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJtc2Rmc3ItY29tcHV0ZXJyZWZlcmVuY2VibCI6IAlbIm1zREZTUi1Db21wdXRlclJlZmVyZW5jZUJMIiwJIAkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJtc2RzLWdlbmVyYXRpb25pZCI6IAkJCVsibXNEUy1HZW5lcmF0aW9uSWQiLAkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJtc2RzLXN1cHBvcnRlZGVuY3J5cHRpb250eXBlcyI6WyJtc0RTLVN1cHBvcnRlZEVuY3J5cHRpb25UeXBlcyIsCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJIm1vZGlmaWNhdGlvbnRpbWVzdGFtcCI6IAkJWyJNb2RpZmljYXRpb25UaW1lc3RhbXAiLAkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibmFtZSI6IAkJCQkJCVsibmFtZSIsCQkJCQkJIAkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJuZXR3b3JrYWRkcmVzcyI6IAkJCQlbIm5ldHdvcmtBZGRyZXNzIiwJCQkJIAkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJuZXR3b3JrdmlldyI6IAkJCQkJWyJOZXR3b3JrVmlldyIsIAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJuZnNob21lZGlyZWN0b3J5IjogCQkJWyJORlNIb21lRGlyZWN0b3J5IiwJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJub2Rlc2FzbHJlYWxtIjogCQkJCVsiTm9kZVNBU0xSZWFsbSIsIAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJub3RlIjogCQkJCQkJWyJOb3RlIiwJCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwvL3NheXMgdGhpcyBpcyBmb3IgbGFzdCBuYW1lIGF0dHJpYnV0ZT8/PwoJIm9iamVjdGNsYXNzIjogCQkJCQlbIm9iamVjdENsYXNzIiwJCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJvYmplY3RjYXRlZ29yeSI6IAkJCQlbIm9iamVjdENhdGVnb3J5IiwJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJIm9iamVjdGd1aWQiOiAJCQkJCVsib2JqZWN0R1VJRCIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkib2JqZWN0c2lkIjogCQkJCQlbIm9iamVjdFNpZCIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sIAoJIm9sY2RhdGFiYXNlIjogCQkJCQlbIk9MQ0RhdGFiYXNlIiwgCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJIm9sY2RhdGFiYXNlaW5kZXgiOiAJCQlbIk9MQ0RhdGFiYXNlSW5kZXgiLCAJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJvbGNzeW5jcmVwbCI6IAkJCQkJWyJPTENTeW5jUmVwbCIsIAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJvcGVyYXRpbmdzeXN0ZW0iOiAJCQkJWyJvcGVyYXRpbmdTeXN0ZW0iLAkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkib3BlcmF0aW5nc3lzdGVtdmVyc2lvbiI6IAkJWyJvcGVyYXRpbmdTeXN0ZW1WZXJzaW9uIiwJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJvd25lciI6IAkJCQkJCVsiT3duZXIiLAkJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJIm93bmVyZ3VpZCI6IAkJCQkJWyJPd25lckdVSUQiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicGFzc3dvcmQiOiAJCQkJCVsiUGFzc3dvcmQiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicGFzc3dvcmRwbHVzIjogCQkJCVsiUGFzc3dvcmRQbHVzIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9pbmRpY2F0ZXMgYXV0aGVudGljYXRpb24gcmVkaXJlY3Rpb24KCSJwYXNzd29yZHBvbGljeW9wdGlvbnMiOiAJCVsiUGFzc3dvcmRQb2xpY3lPcHRpb25zIiwJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInBhc3N3b3Jkc2VydmVybGlzdCI6IAkJCVsiUGFzc3dvcmRTZXJ2ZXJMaXN0IiwJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJwYXNzd29yZHNlcnZlcmxvY2F0aW9uIjogCQlbIlBhc3N3b3JkU2VydmVyTG9jYXRpb24iLAkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicG9ydCI6IAkJCQkJCVsiUG9ydCIsCQkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy93aGljaCBwb3J0IGEgc2VydmljZSBpcyBvbgoJInByZXNldHVzZXJpc2FkbWluIjogCQkJWyJQcmVzZXRVc2VySXNBZG1pbiIsIAkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInByaW1hcnljb21wdXRlcmd1aWQiOiAJCQlbIlByaW1hcnlDb21wdXRlckdVSUQiLAkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInByaW1hcnljb21wdXRlcmxpc3QiOiAJCQlbIlByaW1hcnlDb21wdXRlckxpc3QiLCAJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInByaW1hcnlncm91cGlkIjogCQkJCVsiUHJpbWFyeUdyb3VwSUQiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJwcm9maWxlcyI6IAkJCQkJWyJQcm9maWxlcyIsIAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicHJvZmlsZXN0aW1lc3RhbXAiOiAJCQlbIlByb2ZpbGVzVGltZXN0YW1wIiwgCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicmVhbG5hbWUiOiAJCQkJCVsiUmVhbE5hbWUiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sIC8vWWVzLCBmdWxsbmFtZSBtYXBzIHRvIHJlYWxuYW1lIGJlY2F1c2UuLi4gYXBwbGUKCSJyZWFsdXNlcmlkIjogCQkJCQlbIlJlYWxVc2VySUQiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicmVsYXRpdmVkbnByZWZpeCI6IAkJCVsiUmVsYXRpdmVETlByZWZpeCIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9yZWxhdGl2ZSBkaXN0aW5ndWlzaGVkIG5hbWUsCgkicmlkc2V0cmVmZXJlbmNlcyI6IAkJCVsicklEU2V0UmVmZXJlbmNlcyIsCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJInNhbWFjY291bnRuYW1lIjogCQkJCVsic0FNQWNjb3VudE5hbWUiLAkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkic2FtYWNjb3VudHR5cGUiOiAJCQkJWyJzQU1BY2NvdW50VHlwZSIsCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJzZXJ2ZXJyZWZlcmVuY2VibCI6IAkJCVsic2VydmVyUmVmZXJlbmNlQkwiLAkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJzZXJ2aWNlcHJpbmNpcGFsbmFtZSI6IAkJWyJzZXJ2aWNlUHJpbmNpcGFsTmFtZSIsCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkic2hhZG93aGFzaGRhdGEiOiAJCQkJWyJTaGFkb3dIYXNoRGF0YSIsIAkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkic21iYWNjdGZsYWdzIjogCQkJCVsiU01CQWNjb3VudEZsYWdzIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9hY2NvdW50IGNvbnRyb2wgZmxhZwoJInNtYmdyb3VwcmlkIjogCQkJCQlbIlNNQkdyb3VwUklEIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLCAvL2RlZmluZSBQREMgU01CIGludGVyYWN0aW9uIHdpdGggRGlyZWN0b3J5U2VydmljZQoJInNtYmhvbWUiOiAJCQkJCQlbIlNNQkhvbWUiLAkJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vVU5DIGFkZHJlc3Mgb2YgYSB3aW5kb3dzIGhvbWUgZGlyZWN0b3J5IG1vdW50IHBvaW50Cgkic21iaG9tZWRyaXZlIjogCQkJCVsiU01CSG9tZURyaXZlIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkic21icHJpbWFyeWdyb3Vwc2lkIjogCQkJWyJTTUJQcmltYXJ5R3JvdXBTSUQiLAkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInNtYnBhc3N3b3JkbGFzdHNldCI6IAkJCVsiU01CUGFzc3dvcmRMYXN0U2V0IiwJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwvLyB1c2VkIGluIFNNQiBpbnRlcmFjdGlvbgoJInNtYnByb2ZpbGVwYXRoIjogCQkJCVsiU01CUHJvZmlsZVBhdGgiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwvL2RlZmluZXMgZGVza3RvcCBtYW5hZ2VtZW50IGluZm8KCSJzbWJyaWQiOiAJCQkJCQlbIlNNQlJJRCIsCQkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sIC8vdXNlZCBpbiBTTUIgaW50ZXJhY3Rpb24KCSJzbWJzY3JpcHRwYXRoIjogCQkJCVsiU01CU2NyaXB0UGF0aCIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vZGVmaW5lIFNNQiBsb2dpbiBzY3JpcHQgcGF0aAoJInNtYnNpZCI6IAkJCQkJCVsiU01CU0lEIiwJCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwgLy9kZWZpbmUgU01CIFNlY3VyaXR5IElECgkic21idXNlcndvcmtzdGF0aW9ucyI6IAkJCVsiU01CVXNlcldvcmtzdGF0aW9ucyIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9saXN0IG9mIHdvcmtzdGF0aW9ucyBhIHVzZXIgY2FuIGxvZyBpbiBmcm9tCgkic21ibG9nb2ZmdGltZSI6IAkJCQlbIlNNQkxvZ29mZlRpbWUiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJzbWJsb2dvbnRpbWUiOiAJCQkJWyJTTUJMb2dvblRpbWUiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJzbWJfY3JlYXRlbWFzayI6IAkJCQlbInNtYl9jcmVhdGVtYXNrIiwJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJInNtYl9kaXJlY3RvcnltYXNrIjogCQkJWyJzbWJfZGlyZWN0b3J5bWFzayIsCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJInNtYl9ndWVzdGFjY2VzcyI6IAkJCQlbInNtYl9ndWVzdGFjY2VzcyIsCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJzbWJfbmFtZSI6IAkJCQkJWyJzbWJfbmFtZSIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkic21iX3NoYXJlZCI6ICAJCQkJCVsic21iX3NoYXJlZCIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkic2VydmljZXR5cGUiOiAJCQkJCVsiU2VydmljZVR5cGUiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9kZWZpbmUgU01CIGxvZ2luIHNjcmlwdCBwYXRoCgkic2VydmljZXNsb2NhdG9yIjogCQkJCVsiU2VydmljZXNMb2NhdG9yIiwgCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkic2V0dXBhZHZlcnRpc2luZyI6IAkJCVsiU2V0dXBBc3Npc3RhbnRBZHZlcnRpc2luZyIsCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vcmF3IHNlcnZpY2UgdHlwZSBvZiBhIHNlcnZpY2UsIGV4OiBodHRwIG9yIGh0dHBzIGZvciBrT0RSZWNvcmRUeXBlV2ViU2VydmVyCgkic2hhcmVwb2ludF9hY2NvdW50X3V1aWQiOiAJCVsic2hhcmVwb2ludF9hY2NvdW50X3V1aWQiLAkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJInNoYXJlcG9pbnRfZ3JvdXBfaWQiOiAJCQlbInNoYXJlcG9pbnRfZ3JvdXBfaWQiLAkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJzaG93aW5hZHZhbmNlZHZpZXdvbmx5IjogCQlbInNob3dJbkFkdmFuY2VkVmlld09ubHkiLAkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJInVuaXF1ZWlkIjogCQkJCQlbIlVuaXF1ZUlEIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLCAvL3VzZXIncyAzMmJpdCBJRCBpbiBsZWdhY3kgbWFubmVyCgkidW5sb2Nrb3B0aW9ucyI6IAkJCQlbInVubG9ja09wdGlvbnMiLAkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkidXJsIjogCQkJCQkJCVsiVVJMIiwgCQkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkidXNlcnMiOiAJCQkJCQlbInVzZXJzIiwJCQkJCQkgCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJInVzbmNoYW5nZWQiOiAJCQkJCVsidVNOQ2hhbmdlZCIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkidXNuY3JlYXRlZCI6IAkJCQkJWyJ1U05DcmVhdGVkIiwJCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwgCgkidXNlcmFjY291bnRjb250cm9sIjogCQkJWyJ1c2VyQWNjb3VudENvbnRyb2wiLAkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJ1c2VyY2VydGlmaWNhdGUiOiAJCQkJWyJVc2VyQ2VydGlmaWNhdGUiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJ1c2VycGtjczEyZGF0YSI6IAkJCQlbIlVzZXJQS0NTMTJEYXRhIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkidXNlcnNoZWxsIjogCQkJCQlbIlVzZXJTaGVsbCIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJ1c2Vyc21pbWVjZXJ0aWZpY2F0ZSI6IAkJWyJVc2VyU01JTUVDZXJ0aWZpY2F0ZSIsCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJ3ZWJsb2d1cmkiOiAJCQkJCVsiV2VibG9nVVJJIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vVVJJIG9mIGEgdXNlcidzIHdlYmxvZwoJIndoZW5jaGFuZ2VkIjogCQkJCQlbIndoZW5DaGFuZ2VkIiwJCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJ3aGVuY3JlYXRlZCI6IAkJCQkJWyJ3aGVuQ3JlYXRlZCIsCQkJCQkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiX3dyaXRlcnNfdXNlcmNlcnRpZmljYXRlIjogCVsiX3dyaXRlcnNfVXNlckNlcnRpZmljYXRlIiwJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJIl93cml0ZXJzX2hpbnQiOiAJCQkJWyJfd3JpdGVyc19oaW50IiwJCQkJCSJkc0F0dHJUeXBlTmF0aXZlOiJdLAoJIl93cml0ZXJzX3Bhc3N3ZCI6IAkJCQlbIl93cml0ZXJzX3Bhc3N3ZCIsCQkJCSAJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkiX3dyaXRlcnNfdW5sb2Nrb3B0aW9ucyI6IAkJWyJfd3JpdGVyc191bmxvY2tPcHRpb25zIiwJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJfd3JpdGVyc191c2VyY2VydGlmaWNhdGUiOiAJWyJfd3JpdGVyc19Vc2VyQ2VydGlmaWNhdGUiLAkJImRzQXR0clR5cGVOYXRpdmU6Il0sCgkieG1scGxpc3QiOiAJCQkJCVsiWE1MUGxpc3QiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9zcGVjaWZ5IGFuIFhNTCBQcm9wZXJ0eSBMaXN0CgkicHJvdG9jb2xudW1iZXIiOiAJCQkJWyJQcm90b2NvbE51bWJlciIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInJwY251bWJlciI6IAkJCQkJWyJSUENOdW1iZXIiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibmV0d29ya251bWJlciI6IAkJCQlbIk5ldHdvcmtOdW1iZXIiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJhY2Nlc3Njb250cm9sZW50cnkiOiAJCQlbIkFjY2Vzc0NvbnRyb2xFbnRyeSIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiYXV0aGVudGljYXRpb25hdXRob3JpdHkiOiAJCVsiQXV0aGVudGljYXRpb25BdXRob3JpdHkiLAkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sIC8vc3BlY2lmeSBtZWNoYW5pc20gdXNlZCB0byB2ZXJpZnkgb3Igc2V0IGEgdXNlcidzIHBhc3N3b3JkCgkiYXV0aG9yaXR5cmV2b2NhdGlvbmxpc3QiOiAJCVsiQXV0aG9yaXR5UmV2b2NhdGlvbkxpc3QiLCAJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiYXV0b21vdW50aW5mb3JtYXRpb24iOiAJCVsiQXV0b21vdW50SW5mb3JtYXRpb24iLAkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiY29tcHV0ZXJzIjogCQkJCQlbIkNvbXB1dGVycyIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJkbnNuYW1lIjogCQkJCQkJWyJETlNOYW1lIiwJCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJncm91cCI6IAkJCQkJCVsiR3JvdXAiLAkJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vc3RvcmUgYSBsaXN0IG9mIGdyb3VwcwoJImdyb3VwbWVtYmVycyI6IAkJCQlbIkdyb3VwTWVtYmVycyIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLCAvL3NwZWNpZnkgR1VJRCB2YWx1ZXMgb2YgbWVtYmVycyBvZiBhIGdyb3VwIHRoYXQgYXJlIG5vdCBncm91cHMKCSJncm91cG1lbWJlcnNoaXAiOiAJCQkJWyJHcm91cE1lbWJlcnNoaXAiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwgLy9zcGVjaWZ5IGxpc3Qgb2YgdXNlcnMgdGhhdCBiZWxvbmcgdG8gYSBnaXZlbiBncm91cAoJImdyb3Vwc2VydmljZXMiOiAJCQkJWyJHcm91cFNlcnZpY2VzIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9YTUwgcGxpc3QgdG8gZGVmaW5lIGdyb3VwJ3Mgc2VydmljZXMsCgkiaG9tZWRpcmVjdG9yeSI6IAkJCQlbIkhvbWVEaXJlY3RvcnkiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJpbWhhbmRsZSI6IAkJCQkJWyJJTUhhbmRsZSIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwvL3VzZXIncyBpbnN0YW50IG1lc3NhZ2luZyBoYW5kbGVzCgkiaXBhZGRyZXNzIjogCQkJCQlbIklQQWRkcmVzcyIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJpcHY2YWRkcmVzcyI6IAkJCQkJWyJJUHY2QWRkcmVzcyIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJrZGNhdXRoa2V5IjogCQkJCQlbIktEQ0F1dGhLZXkiLAkJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9zdG9yZSBhIEtEQyBtYXN0ZXIga2V5Cgkia2RjY29uZmlnZGF0YSI6IAkJCQlbIktEQ0NvbmZpZ0RhdGEiLCAJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkia2V5d29yZHMiOiAJCQkJCVsiS2V5d29yZHMiLCAJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImxkYXByZWFkcmVwbGljYXMiOiAJCQlbIkxEQVBSZWFkUmVwbGljYXMiLAkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vbGlzdCBvZiBMREFQIHNlcnZlciBVUkxzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVhZCBkaXJlY3RvcnkgZGF0YQoJImxkYXB3cml0ZXJlcGxpY2FzIjogCQkJWyJMREFQV3JpdGVSZXBsaWNhcyIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkibGlua2VkaWRlbnRpdHkiOiAJCQkJWyJMaW5rZWRJZGVudGl0eSIsCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJsb2NhbGVyZWxheSI6IAkJCQkJWyJMb2NhbGVSZWxheSIsIAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJsb2NhbGVzdWJuZXRzIjogCQkJCVsiTG9jYWxlU3VibmV0cyIsIAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJuZXN0ZWRncm91cHMiOiAJCQkJWyJOZXN0ZWRHcm91cHMiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwgLy9zcGVjaWZ5IGxpc3Qgb2YgbmVzdGVkIGdyb3VwIEdVSUQgdmFsdWVzIGluIGEgZ3JvdXAgYXR0cmlidXRlCgkibmV0Z3JvdXBzIjogCQkJCQlbIk5ldEdyb3VwcyIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwvL3NwZWNpZnkgYSBsaXN0IG9mIG5ldCBncm91cHMgdGhhdCBhIHVzZXIgb3IgaG9zdCByZWNvcmQgaXMgYSBtZW1iZXIgb2YKCSJuaWNrbmFtZSI6IAkJCQkJWyJOaWNrTmFtZSIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJvcmdhbml6YXRpb25pbmZvIjogCQkJWyJPcmdhbml6YXRpb25JbmZvIiwJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJvcmdhbml6YXRpb25uYW1lIjogCQkJWyJPcmdhbml6YXRpb25OYW1lIiwJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJwZ3BwdWJsaWNrZXkiOiAJCQkJWyJQR1BQdWJsaWNLZXkiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJwcm90b2NvbHMiOiAJCQkJCVsiUHJvdG9jb2xzIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInJlY29yZG5hbWUiOiAJCQkJCVsiUmVjb3JkTmFtZSIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJyZWNvcmRfZGFlbW9uX3ZlcnNpb24iOiAJCVsicmVjb3JkX2RhZW1vbl92ZXJzaW9uIiwJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJyZWxhdGlvbnNoaXBzIjogCQkJCVsiUmVsYXRpb25zaGlwcyIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInJlc291cmNlaW5mbyI6IAkJCQlbIlJlc291cmNlSW5mbyIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJInJlc291cmNldHlwZSI6IAkJCQlbIlJlc291cmNlVHlwZSIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJImF1dGhjcmVkZW50aWFsIjogCQkJCVsiQXV0aENyZWRlbnRpYWwiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwvL3N0b3JlcyBhbiBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFsIHVzZWQgdG8gYXV0aGVudGljYXRlIHRvIGEgZGlyZWN0b3J5CgkiZGF0ZXJlY29yZGNyZWF0ZWQiOiAJCQlbIkRhdGVSZWNvcmRDcmVhdGVkIiwJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwKCSJrZXJiZXJvc2ZsYWdzIjogCQkJCVsiS2VyYmVyb3NGbGFncyIsCQkJCQkiZHNBdHRyVHlwZU5hdGl2ZToiXSwKCSJrZXJiZXJvc3JlYWxtIjogCQkJCVsiS2VyYmVyb3NSZWFsbSIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLAoJIm50ZG9tYWluY29tcHV0ZXJhY2NvdW50IjogCQlbIk5URG9tYWluQ29tcHV0ZXJBY2NvdW50IiwJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vc3VwcG9ydCBrZXJiZXJvcyBTTUIgc2VydmVyIHNlcnZpY2VzCgkicHJpbWFyeW50ZG9tYWluIjogCQkJCVsiUHJpbWFyeU5URG9tYWluIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicHdkYWdpbmdwb2xpY3kiOiAJCQkJWyJQd2RBZ2luZ1BvbGljeSIsCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vcmVjb3JkJ3MgcGFzc3dvcmQgYWdpbmcgcG9saWN5CgkicmVhZG9ubHlub2RlIjogCQkJCVsiUmVhZE9ubHlOb2RlIiwJCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkiYXV0aG1ldGhvZCI6IAkJCQkJWyJBdXRoTWV0aG9kIiwJCQkJCQkiZHNBdHRyVHlwZVN0YW5kYXJkOiJdLC8vc3BlY2lmeSBhIHJlY29yZCdzIGF1dGhlbnRpY2F0aW9uIG1ldGhvZAoJInJlY29yZHR5cGUiOiAJCQkJCVsiUmVjb3JkVHlwZSIsCQkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXSwgLy9zcGVjaWZ5IHR5cGUgb2YgYSByZWNvcmQgb3IgZGlyZWN0b3J5IG5vZGUKCSJhZHZlcnRpc2Vkc2VydmljZXMiOiAJCQlbIkFkdmVydGlzZWRTZXJ2aWNlcyIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sLy9zcGVjaWZ5IChCb3Vuam91cikgYWR2ZXJ0aXNlZCBzZXJ2aWNlcwoJIm5ldHdvcmtpbnRlcmZhY2VzIjogCQkJWyJOZXR3b3JrSW50ZXJmYWNlcyIsCQkJCSJkc0F0dHJUeXBlU3RhbmRhcmQ6Il0sCgkicHJpbWFyeWxvY2FsZSI6IAkJCQlbIlByaW1hcnlMb2NhbGUiLAkJCQkJImRzQXR0clR5cGVTdGFuZGFyZDoiXQp9CnZhciBub2RlX2xpc3QgPSB7CgkibmV0d29yayI6IAkJCTB4MjIwNSwvLyQua09ETm9kZVR5cGVOZXR3b3JrLAoJImxvY2FsIjogCQkJMHgyMjAwLC8vJC5rT0ROb2RlVHlwZUxvY2FsTm9kZXMsCgkiY29uZmlnIjogCQkJMHgyMjAyLC8vJC5rT0ROb2RlVHlwZUNvbmZpZ3VyZSwKCSJjb250YWN0cyI6IAkJMHgyMjA0LC8vJC5rT0ROb2RlVHlwZUNvbnRhY3RzCn0KLy8gaGVscGVyIGZ1bmN0aW9ucyB0byBhY3R1YWxseSBkbyB0aGUgT0QgcXVlcmllcyBhbmQgcmV0dXJuIHJlc3VsdHMKZnVuY3Rpb24gR2V0X09EX09iamVjdENsYXNzKHtvYmplY3RjbGFzcz0iVXNlcnMiLCBtYXRjaD0iQW55IiwgdmFsdWU9bnVsbCwgbWF4X3Jlc3VsdHM9MCwgcXVlcnlfYXR0cmlidXRlcz0iQWxsIiwgcmV0dXJuX2F0dHJpYnV0ZXM9W251bGxdLCBub2RldHlwZT0nbmV0d29yayd9ID0ge30pewoJLy9nZXRzIGFsbCBhdHRyaWJ1dGVzIGZvciBhbGwgbG9jYWwgdXNlcnMKCXZhciBzZXNzaW9uID0gUmVmKCk7Cgl2YXIgbm9kZSA9IFJlZigpOwoJdmFyIHF1ZXJ5ID0gUmVmKCk7CglzZXNzaW9uID0gJC5PRFNlc3Npb24uZGVmYXVsdFNlc3Npb247CgkvL2NvbnNvbGUubG9nKHNlc3Npb24pOwoJdmFyIGZpeGVkX3JldHVybl9hdHRyaWJ1dGVzID0gW107Cglmb3IodmFyIGkgaW4gcmV0dXJuX2F0dHJpYnV0ZXMpewoJCWlmKHJldHVybl9hdHRyaWJ1dGVzW2ldICE9IG51bGwpewoJCQlyZXRfYXR0cl9sb3dlciA9IHJldHVybl9hdHRyaWJ1dGVzW2ldLnRvTG93ZXJDYXNlKCk7CgkJCWlmKGF0dHJpYnV0ZXNfbGlzdC5oYXNPd25Qcm9wZXJ0eShyZXRfYXR0cl9sb3dlcikpewoJCQkJZml4ZWRfcmV0dXJuX2F0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGVzX2xpc3RbcmV0X2F0dHJfbG93ZXJdWzFdICsgYXR0cmlidXRlc19saXN0W3JldF9hdHRyX2xvd2VyXVswXSk7CgkJCX0KCQl9ZWxzZXsKCQkJZml4ZWRfcmV0dXJuX2F0dHJpYnV0ZXMucHVzaChudWxsKTsKCQl9Cgl9CglpZihmaXhlZF9yZXR1cm5fYXR0cmlidXRlcy5sZW5ndGggPT0gMSl7CgkJZml4ZWRfcmV0dXJuX2F0dHJpYnV0ZXMgPSBmaXhlZF9yZXR1cm5fYXR0cmlidXRlc1swXTsKCX0KCWlmKGF0dHJpYnV0ZXNfbGlzdC5oYXNPd25Qcm9wZXJ0eShxdWVyeV9hdHRyaWJ1dGVzLnRvTG93ZXJDYXNlKCkpKXsKCQlxdWVyeV9hdHRyX2xvd2VyID0gcXVlcnlfYXR0cmlidXRlcy50b0xvd2VyQ2FzZSgpOwoJCXF1ZXJ5X2F0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzX2xpc3RbcXVlcnlfYXR0cl9sb3dlcl1bMV0gKyBhdHRyaWJ1dGVzX2xpc3RbcXVlcnlfYXR0cl9sb3dlcl1bMF07Cgl9CgllbHNlewoJCXJldHVybiAicXVlcnkgYXR0cmlidXRlICIgKyBxdWVyeV9hdHRyaWJ1dGVzICsgIiBub3QgZm91bmQiOwoJfQoJLy9jb25zb2xlLmxvZyhmaXhlZF9yZXR1cm5fYXR0cmlidXRlcyk7Cglub2RlID0gJC5PRE5vZGUubm9kZVdpdGhTZXNzaW9uVHlwZUVycm9yKHNlc3Npb24sIG5vZGVfbGlzdFtub2RldHlwZV0sIG51bGwpOwoJLy9jb25zb2xlLmxvZygiYWJvdXQgdG8gcHJpbnQgc3Vibm9kZSBuYW1lc1xuIik7CgkvL2NvbnNvbGUubG9nKE9iakMuZGVlcFVud3JhcCgkLk9ETm9kZUNvcHlTdWJub2RlTmFtZXMobm9kZSwgJCgpKSkpOwoJLy9jb25zb2xlLmxvZygiYWJvdXQgdG8gcHJpbnQgc3VwcG9ydGVkIGF0dHJpYnV0ZXNcbiIpOwoJLy9jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShbT2JqQy5kZWVwVW53cmFwKCQuT0ROb2RlQ29weVN1cHBvcnRlZEF0dHJpYnV0ZXMobm9kZSwgb2JqZWN0X2NsYXNzW29iamVjdGNsYXNzXSwgJCgpKSldLCBudWxsLCAyKSk7CgkvL2h0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL29wZW5kaXJlY3Rvcnkvb2RxdWVyeS8xMzkxNzA5LXF1ZXJ5d2l0aG5vZGU/bGFuZ3VhZ2U9b2JqYwoJLy9jb25zb2xlLmxvZygiYWJvdXQgdG8gcHJpbnQgc3VwcG9ydGVkIHJlY29yZCB0eXBlc1xuIik7CgkvL2NvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KFtPYmpDLmRlZXBVbndyYXAoJC5PRE5vZGVDb3B5U3VwcG9ydGVkUmVjb3JkVHlwZXMobm9kZSwgJCgpKSldLCBudWxsLCAyKSk7CglxdWVyeSA9ICQuT0RRdWVyeS5xdWVyeVdpdGhOb2RlRm9yUmVjb3JkVHlwZXNBdHRyaWJ1dGVNYXRjaFR5cGVRdWVyeVZhbHVlc1JldHVybkF0dHJpYnV0ZXNNYXhpbXVtUmVzdWx0c0Vycm9yKAoJbm9kZSwgCglvYmplY3RfY2xhc3Nbb2JqZWN0Y2xhc3NdLCAvLyhvYmplY3RjbGFzcykgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vb3BlbmRpcmVjdG9yeS9vcGVuZGlyZWN0b3J5X2Z1bmN0aW9ucy9yZWNvcmRfdHlwZXM/bGFuZ3VhZ2U9b2JqYwoJcXVlcnlfYXR0cmlidXRlcywgLy9zZXQgdG8gcmVjb3JkbmFtZSB0aGF0IHdlJ3JlIGxvb2tpbmcgdG8gbWF0Y2gKCW1hdGNoX3R5cGVbbWF0Y2hdLCAvLyggZXF1YWxzLCBiZWdpbnNXaXRoLCBjb250YWlucywgZXRjKSBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi9vcGVuZGlyZWN0b3J5L29wZW5kaXJlY3RvcnlfZnVuY3Rpb25zL21hdGNoX3R5cGVzP2xhbmd1YWdlPW9iamMKCXZhbHVlLCAvLyBpbnB1dCBxdWVyeSAobGlrZSBhZG1pbikKCWZpeGVkX3JldHVybl9hdHRyaWJ1dGVzLAoJbWF4X3Jlc3VsdHMsIC8vbWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cywgMD1hbGwKCSQoKSk7IC8vZXJyb3IKCXZhciByZXN1bHRzID0gcXVlcnkucmVzdWx0c0FsbG93aW5nUGFydGlhbEVycm9yKGZhbHNlLCBudWxsKTsKCS8vcmVzdWx0czsKCS8vY29uc29sZS5sb2cocmVzdWx0cyk7Cgl2YXIgb3V0cHV0ID0ge307Cglmb3IodmFyIGkgPSAwOyBpIDwgcmVzdWx0cy5jb3VudDsgaSsrKXsKCQl2YXIgZXJyb3IgPSBSZWYoKTsKCQl2YXIgYXR0cmlidXRlcyA9IHJlc3VsdHMub2JqZWN0QXRJbmRleChpKS5yZWNvcmREZXRhaWxzRm9yQXR0cmlidXRlc0Vycm9yKCQoKSxlcnJvcik7CgkJdmFyIGtleXMgPSBhdHRyaWJ1dGVzLmFsbEtleXM7CgkJbmFtZV9pbmRleCA9IE9iakMuZGVlcFVud3JhcChhdHRyaWJ1dGVzLnZhbHVlRm9yS2V5KCQoImRzQXR0clR5cGVTdGFuZGFyZDpSZWNvcmROYW1lIikpKQoJCWlmKEFycmF5LmlzQXJyYXkobmFtZV9pbmRleCkpewoJCQluYW1lX2luZGV4ID0gbmFtZV9pbmRleFswXQoJCX0KCQlpZihub2RldHlwZSA9PT0gIm5ldHdvcmsiICYmIE9iakMuZGVlcFVud3JhcChhdHRyaWJ1dGVzLnZhbHVlRm9yS2V5KCQoImRzQXR0clR5cGVTdGFuZGFyZDpBcHBsZU1ldGFOb2RlTG9jYXRpb24iKSkpWzBdID09PSAiL0xvY2FsL0RlZmF1bHQiKXsKCQkJY29udGludWU7CgkJfQoJCW91dHB1dFtuYW1lX2luZGV4XSA9IHt9OwoJCWZvcih2YXIgaiA9IDA7IGogPCBrZXlzLmNvdW50OyBqKyspewoJCQl2YXIga2V5ID0gT2JqQy51bndyYXAoa2V5cy5vYmplY3RBdEluZGV4KGopKTsKCQkJdmFyIGFycmF5ID0gYXR0cmlidXRlcy52YWx1ZUZvcktleShrZXlzLm9iamVjdEF0SW5kZXgoaikpOwoJCQl2YXIgYXJyYXlfbGVuZ3RoID0gcGFyc2VJbnQoJC5DRkFycmF5R2V0Q291bnQoYXJyYXkpKTsKCQkJdmFyIHZhbCA9IFtdOwoJCQlmb3IodmFyIGsgPSAwOyBrIDwgYXJyYXlfbGVuZ3RoOyBrKyspewoJCQkJaWYoZml4ZWRfcmV0dXJuX2F0dHJpYnV0ZXMgPT09IG51bGwgfHwgZml4ZWRfcmV0dXJuX2F0dHJpYnV0ZXMuaW5jbHVkZXMoImRzQXR0cmlidXRlc0FsbCIpIHx8IGZpeGVkX3JldHVybl9hdHRyaWJ1dGVzLmluY2x1ZGVzKGtleXMub2JqZWN0QXRJbmRleChqKS5qcykpewoJCQkJCWlmKCFhcnJheS5vYmplY3RBdEluZGV4KGspLmlzS2luZE9mQ2xhc3MoJC5OU1N0cmluZy5jbGFzcykpewoJCQkJCQkvL2NvbnNvbGUubG9nKGFycmF5Lm9iamVjdEF0SW5kZXgoaykuYmFzZTY0RW5jb2RlZFN0cmluZ1dpdGhPcHRpb25zKG51bGwpLmpzKTsKCQkJCQkJdmFsLnB1c2goYXJyYXkub2JqZWN0QXRJbmRleChrKS5iYXNlNjRFbmNvZGVkU3RyaW5nV2l0aE9wdGlvbnMobnVsbCkuanMpOwoJCQkJCX1lbHNlewoJCQkJCQkvL2NvbnNvbGUubG9nKGFycmF5Lm9iamVjdEF0SW5kZXgoaykpOwoJCQkJCQl2YWwucHVzaChhcnJheS5vYmplY3RBdEluZGV4KGspLmpzKTsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJfQoJCQkvL3ZhciB2YWwgPSBPYmpDLmRlZXBVbndyYXAoYXR0cmlidXRlcy52YWx1ZUZvcktleShrZXlzLm9iamVjdEF0SW5kZXgoaikpKTsKCQkJaWYodmFsLmxlbmd0aCA+IDApewoJCQkJb3V0cHV0W25hbWVfaW5kZXhdW2tleV0gPSB2YWw7CgkJCX0KCQl9CgkJaWYoT2JqZWN0LmtleXMob3V0cHV0W25hbWVfaW5kZXhdKS5sZW5ndGggPT09IDApewoJCQlkZWxldGUgb3V0cHV0W25hbWVfaW5kZXhdOwoJCX0KCX0KCXJldHVybiBvdXRwdXQ7Cn0KZnVuY3Rpb24gR2V0X09EX05vZGVfQ29uZmlndXJhdGlvbih7bm9kZT0iYWxsIn0gPSB7fSl7CglsZXQgc2Vzc2lvbiA9ICQuT0RTZXNzaW9uLmRlZmF1bHRTZXNzaW9uOwoJbGV0IG5hbWVzID0gc2Vzc2lvbi5ub2RlTmFtZXNBbmRSZXR1cm5FcnJvcigkKCkpOwoJLy9jb25zb2xlLmxvZyhuYW1lcyk7CgluYW1lcyA9IE9iakMuZGVlcFVud3JhcChuYW1lcyk7CglsZXQgY29uZmlndXJhdGlvbiA9IHt9OwoJZm9yKGxldCBpIGluIG5hbWVzKXsKCQkvL2NvbnNvbGUubG9nKG5hbWVzW2ldKTsKCQlsZXQgY29uZmlnID0gc2Vzc2lvbi5jb25maWd1cmF0aW9uRm9yTm9kZW5hbWUobmFtZXNbaV0pOwoJCWNvbmZpZ3VyYXRpb25bbmFtZXNbaV1dID0ge307CgkJaWYoY29uZmlnLm5vZGVOYW1lLmpzICE9PSB1bmRlZmluZWQpewoJCQljb25maWd1cmF0aW9uW25hbWVzW2ldXVsnbm9kZU5hbWUnXSA9IGNvbmZpZy5ub2RlTmFtZS5qczsKCQl9CgkJY29uZmlndXJhdGlvbltuYW1lc1tpXV1bJ3RydXN0QWNjb3VudCddID0gT2JqQy5kZWVwVW53cmFwKGNvbmZpZy50cnVzdEFjY291bnQpOwoJCWNvbmZpZ3VyYXRpb25bbmFtZXNbaV1dWyd0cnVzdEtlcmJlcm9zUHJpbmNpcGFsJ10gPSBPYmpDLmRlZXBVbndyYXAoY29uZmlnLnRydXN0S2VyYmVyb3NQcmluY2lwYWwpOwoJCWNvbmZpZ3VyYXRpb25bbmFtZXNbaV1dWyd0cnVzdE1ldGFBY2NvdW50J10gPSBPYmpDLmRlZXBVbndyYXAoY29uZmlnLnRydXN0TWV0YUFjY291bnQpOwoJCWNvbmZpZ3VyYXRpb25bbmFtZXNbaV1dWyd0cnVzdFR5cGUnXSA9IE9iakMuZGVlcFVud3JhcChjb25maWcudHJ1c3RUeXBlKTsKCQljb25maWd1cmF0aW9uW25hbWVzW2ldXVsndHJ1c3RVc2VzS2VyYmVyb3NLZXl0YWInXSA9IGNvbmZpZy50cnVzdFVzZXNLZXJiZXJvc0tleXRhYjsKCQljb25maWd1cmF0aW9uW25hbWVzW2ldXVsndHJ1c3RVc2VzTXV0dWFsQXV0aGVudGljYXRpb24nXSA9IE9iakMuZGVlcFVud3JhcChjb25maWcudHJ1c3RVc2VzTXV0dWFsQXV0aGVudGljYXRpb24pOwoJCWNvbmZpZ3VyYXRpb25bbmFtZXNbaV1dWyd0cnVzdFVzZXNTeXN0ZW1LZXljaGFpbiddID0gT2JqQy5kZWVwVW53cmFwKGNvbmZpZy50cnVzdFVzZXNTeXN0ZW1LZXljaGFpbik7CgkJaWYoY29uZmlnLmRlZmF1bHRNb2R1bGVFbnRyaWVzICE9PSB1bmRlZmluZWQpewoJCQljb25maWd1cmF0aW9uW25hbWVzW2ldXVsnZGVmYXVsdE1hcHBpbmdzJ10gPSBPYmpDLmRlZXBVbndyYXAoY29uZmlnLmRlZmF1bHRNb2R1bGVFbnRyaWVzKTsKCQl9CgkJaWYoY29uZmlnLmF1dGhlbnRpY2F0aW9uTW9kdWxlRW50cmllcyAhPT0gdW5kZWZpbmVkKXsKCQkJY29uZmlndXJhdGlvbltuYW1lc1tpXV1bJ2F1dGhlbnRpY2F0aW9uTW9kdWxlRW50cmllcyddID0gY29uZmlnLmF1dGhlbnRpY2F0aW9uTW9kdWxlRW50cmllczsKCQl9CgkJY29uZmlndXJhdGlvbltuYW1lc1tpXV1bJ3ZpcnR1YWxTdWJub2RlcyddID0gT2JqQy5kZWVwVW53cmFwKGNvbmZpZy52aXJ0dWFsU3Vibm9kZXMpOwoJCWNvbmZpZ3VyYXRpb25bbmFtZXNbaV1dWyd0ZW1wbGF0ZU5hbWUnXSA9IE9iakMuZGVlcFVud3JhcChjb25maWcudGVtcGxhdGVOYW1lKTsKCQljb25maWd1cmF0aW9uW25hbWVzW2ldXVsncHJlZmVycmVkRGVzdGluYXRpb25Ib3N0TmFtZSddID0gT2JqQy5kZWVwVW53cmFwKGNvbmZpZy5wcmVmZXJyZWREZXN0aW5hdGlvbkhvc3ROYW1lKTsKCQljb25maWd1cmF0aW9uW25hbWVzW2ldXVsncHJlZmVycmVkRGVzdGluYXRpb25Ib3N0UG9ydCddID0gT2JqQy5kZWVwVW53cmFwKGNvbmZpZy5wcmVmZXJyZWREZXN0aW5hdGlvbkhvc3RQb3J0KTsKCQlpZihjb25maWcuZGlzY292ZXJ5TW9kdWxlRW50cmllcyAhPT0gdW5kZWZpbmVkKXsKCQkJY29uZmlndXJhdGlvbltuYW1lc1tpXV1bJ2Rpc2NvdmVyeU1vZHVsZUVudHJpZXMnXSA9IE9iakMuZGVlcFVud3JhcChjb25maWcuZGlzY292ZXJ5TW9kdWxlRW50cmllcyk7CgkJfQoJfQoJLy9ub2RlID0gJC5PRE5vZGUubm9kZVdpdGhTZXNzaW9uVHlwZUVycm9yKHNlc3Npb24sICQua09ETm9kZVR5cGVMb2NhbE5vZGVzLCBudWxsKTsKCW5vZGUgPSAkLk9ETm9kZS5ub2RlV2l0aFNlc3Npb25UeXBlRXJyb3Ioc2Vzc2lvbiwgMHgyMjAwLCBudWxsKTsKCS8vdmFyIHBvbGljaWVzID0gJC5PRE5vZGVDb3B5QWNjb3VudFBvbGljaWVzKG5vZGUsICQoKSk7CglsZXQgcG9saWNpZXMgPSBub2RlLmFjY291bnRQb2xpY2llc0FuZFJldHVybkVycm9yKCQoKSk7CglpZihwb2xpY2llcy5qcyAhPT0gdW5kZWZpbmVkKXsKCQljb25maWd1cmF0aW9uWydMb2NhbF9wb2xpY2llcyddID0gT2JqQy5kZWVwVW53cmFwKHBvbGljaWVzKTsKCX0KCS8vbm9kZSA9ICQuT0ROb2RlLm5vZGVXaXRoU2Vzc2lvblR5cGVFcnJvcihzZXNzaW9uLCAkLmtPRE5vZGVUeXBlTmV0d29yaywgbnVsbCk7Cglub2RlID0gJC5PRE5vZGUubm9kZVdpdGhTZXNzaW9uVHlwZUVycm9yKHNlc3Npb24sIDB4MjIwNSwgbnVsbCk7CgkvL3ZhciBwb2xpY2llcyA9ICQuT0ROb2RlQ29weUFjY291bnRQb2xpY2llcyhub2RlLCAkKCkpOwoJcG9saWNpZXMgPSBub2RlLmFjY291bnRQb2xpY2llc0FuZFJldHVybkVycm9yKCQoKSk7CglpZihwb2xpY2llcy5qcyAhPT0gdW5kZWZpbmVkKXsKCQljb25maWd1cmF0aW9uWydOZXR3b3JrX3BvbGljaWVzJ10gPSBPYmpDLmRlZXBVbndyYXAocG9saWNpZXMpOwoJfQoJcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbmZpZ3VyYXRpb24sIG51bGwsIDIpOwp9Ci8vIG1haW4gZnVuY3Rpb25zCmZ1bmN0aW9uIENvbnZlcnRUb19TSUQoe0FQST10cnVlLCBvYmplY3Q9Ii5cXHJvb3QiLCB0eXBlPSJVc2VycyIsaGVscD1mYWxzZX0gPSB7fSl7CgkvL2dvZXMgZnJvbSAiRG9tYWluXFVzZXIiIG9yICJEb21haW5cR3JvdXAiIG9yICJEb21haW5cQ29tcHV0ZXIiIHRvIFNJRAoJLy90eXBlIHNob3VsZCBiZTogVXNlcnMsIEdyb3Vwcywgb3IgQ29tcHV0ZXJzCglpZihoZWxwKXsKCSAgICB2YXIgb3V0cHV0ID0gIiI7CgkJb3V0cHV0ICs9ICJcXG5Db252ZXJ0IFVzZXJzLCBHcm91cHMsIE9yIENvbXB1dGVycyB0byBkb21haW4gb3IgbG9jYWwgU0lEcy4iOwoJCW91dHB1dCArPSAiXFxuXCJvYmplY3RcIiBzaG91bGQgYmUgZWl0aGVyIFwiLlxcXFxsb2NhbHRoaW5nXCIgb3IgXCJORVRCSU9TRE9NQUlOXFxcXHRoaW5nXCIiOwoJCW91dHB1dCArPSAiXFxuXCJ0eXBlXCIgc2hvdWxkIGJlIFwiVXNlcnNcIiwgXCJHcm91cHNcIiwgb3IgXCJDb21wdXRlcnNcIiI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IENvbnZlcnRUb19TSUQoe29iamVjdDpcIi5cXFxccm9vdFwiLHR5cGU6XCJVc2Vyc1wifSk7IjsKCQlyZXR1cm4gb3V0cHV0OwoJfQoJY29tbWFuZCA9ICIiOwoJc3BsaXRPYmplY3QgPSBvYmplY3Quc3BsaXQoJ1xcJyk7CglpZiAoc3BsaXRPYmplY3QubGVuZ3RoICE9IDIpCgl7CgkJcmV0dXJuICJJbnZhbGlkIGZvcm1hdCBmb3IgdGhlIG9iamVjdC4gU2hvdWxkIGJlIERPTUFJTlxcb2JqZWN0XG4iOwoJfQoJaWYgKEFQSSA9PSB0cnVlKSB7CgkJLy9Vc2UgT2JqQyBjYWxscwoJCWlmKG9iamVjdC5pbmNsdWRlcygiLiIpKXsKCQkJLy93ZSBuZWVkIHRvIGRvIGEgbG9jYWwgcXVlcnkgaW5zdGVhZAoJCQl2YXIgZml4ZWRfcXVlcnkgPSBvYmplY3Quc3BsaXQoIlxcIikuc2xpY2UoMSk7CgkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6dHlwZSwgbWF4X3Jlc3VsdHM6MSwgdmFsdWU6Zml4ZWRfcXVlcnksIG1hdGNoOiJFcXVhbFRvIiwgcXVlcnlfYXR0cmlidXRlczoiUmVjb3JkTmFtZSIsIHJldHVybl9hdHRyaWJ1dGVzOlsiU01CU0lEIl0sIG5vZGV0eXBlOiJsb2NhbCJ9KTsKCQl9ZWxzZXsKCQkJdmFyIHF1ZXJ5ID0gR2V0X09EX09iamVjdENsYXNzKHtvYmplY3RjbGFzczp0eXBlLCBtYXhfcmVzdWx0czoxLCB2YWx1ZTpvYmplY3QsIG1hdGNoOiJFcXVhbFRvIiwgcXVlcnlfYXR0cmlidXRlczoiUmVjb3JkTmFtZSIsIHJldHVybl9hdHRyaWJ1dGVzOlsiU01CU0lEIl19KTsKCQl9CgkJdHJ5ewoJICAgICAgICB2YXIgc2lkID0gcXVlcnlbdHlwZV1bMF1bImRzQXR0clR5cGVTdGFuZGFyZDpTTUJTSUQiXVswXTsKCSAgICAgICAgcmV0dXJuIHNpZDsKCSAgICB9Y2F0Y2goZXJyKXsKCSAgICAJcmV0dXJuICJObyBzdWNoIG9iamVjdCI7CgkgICAgfQoJfQoJZWxzZXsKCQkvL3VzZSBjb21tYW5kLWxpbmUgZnVuY3Rpb25hbGl0eQoJCWlmIChzcGxpdE9iamVjdFswXSA9PSAiLiIpCgkJeyAvL2RvIGEgbG9jYWwgcXVlcnkKCQkJY29tbWFuZCA9ICJkc2NsIC4gcmVhZCBcIi8iICsgdHlwZSArICIvIiArIHNwbGl0T2JqZWN0WzFdICsgIlwiIFNNQlNJRCI7CgkJfQoJCWVsc2V7CgkJCWNvbW1hbmQgPSAiZHNjbCBcIi9BY3RpdmUgRGlyZWN0b3J5LyIgKyBzcGxpdE9iamVjdFswXSArIAoJCQkJIi9BbGwgRG9tYWluc1wiIHJlYWQgXCIvIiArIHR5cGUgKyAiLyIgKyBzcGxpdE9iamVjdFsxXSArICJcIiBTTUJTSUQiOwoJCX0KCQkvL291dHB1dCB3aWxsIGVpdGhlciBoYXZlIFNNQlNJRDogUy0xLTUuLi4gb3IgTm8gU3VjaCBLZXk6IFNNQlNJRCBpZiB1c2VyIGV4aXN0cwoJCXRyeXsKCQkJb3V0cHV0ID0gY3VyckFwcC5kb1NoZWxsU2NyaXB0KGNvbW1hbmQpOwoJCQlpZiAob3V0cHV0LmluZGV4T2YoIlNNQlNJRDogUy0iKSAhPSAtMSkKCQkJCXJldHVybiBvdXRwdXQuc3BsaXQoIiAiKVsxXS50cmltKCk7CgkJCWVsc2UKCQkJCXJldHVybiAiTm8gc3VjaCBrZXkiOwoJCX0KCQljYXRjaChlcnIpewoJCQkvLzxkc2NsX2NtZD4gRFMgRXJyb3I6IC0xNDEzNiAoZURTUmVjb3JkTm90Rm91bmQpIGlmIG9iamVjdCBkb2Vzbid0IGV4aXN0CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gQ29udmVydEZyb21fU0lEKHtBUEk9dHJ1ZSwgc2lkPSJTLTEtNS0yMS0zMjc4NDk2MjM1LTMwMDQ5MDIwNTctMTI0NDU4NzUzMi01MTIiLCB0eXBlPSJVc2VycyIsaGVscD1mYWxzZX0gPSB7fSl7CgkvL2dvZXMgZnJvbSBTLTEtNS0yMS0uLi4gdG8gIkRvbWFpblxVc2VyIiwgIkRvbWFpblxHcm91cCIsIG9yICJEb21haW5cQ29tcHV0ZXIiCglpZihoZWxwKXsKCSAgICB2YXIgb3V0cHV0ID0gIiI7CgkJb3V0cHV0ICs9ICJcXG5Db252ZXJ0IFVzZXJzLCBHcm91cHMsIG9yIENvbXB1dGVycyBmcm9tIFNJRHMgdG8gbmFtZXMiOwoJCW91dHB1dCArPSAiXFxuXCJzaWRcIiBzaG91bGQgYmUgYSBmdWxsIFNJRCB2YWx1ZSBpbiBxdW90ZXMgZm9yIGVpdGhlciBhIFVzZXIsIEdyb3VwLCBvciBDb21wdXRlci4gTm8gb3RoZXIgdHlwZSBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLiI7CgkJb3V0cHV0ICs9ICJcXG5cInR5cGVcIiBzaG91bGQgYmUgXCJVc2Vyc1wiLFwiR3JvdXBzXCIsIG9yIFwiQ29tcHV0ZXJzXCIiOwoJCW91dHB1dCArPSAiXFxuY2FsbGVkOiBDb252ZXJ0RnJvbV9TSUQoe3NpZDpcIlMtMS01LTIxLTMyNzg0OTYyMzUtMzAwNDkwMjA1Ny0xMjQ0NTg3NTMyLTUxMlwiLHR5cGU6XCJVc2Vyc1wifSkiOwoJCXJldHVybiBvdXRwdXQ7Cgl9Cgljb21tYW5kID0gIiI7Cglkb21haW4gPSBHZXRfQ3VycmVudE5FVEJJT1NEb21haW4oQVBJKTsKCWlmICghZG9tYWluKXsKCQlyZXR1cm4gIkZhaWxlZCB0byBnZXQgZG9tYWluLiI7Cgl9CglpZiAoQVBJID09IHRydWUpewoJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6dHlwZSwgbWF4X3Jlc3VsdHM6MSwgdmFsdWU6c2lkLCBtYXRjaDoiRXF1YWxUbyIsIHF1ZXJ5X2F0dHJpYnV0ZXM6IlNNQlNJRCIsIHJldHVybl9hdHRyaWJ1dGVzOlsiUmVjb3JkTmFtZSJdfSk7CiAgICAgICAgdHJ5ewoJICAgICAgICB2YXIgbmFtZSA9IHF1ZXJ5W3R5cGVdWzBdWyJkc0F0dHJUeXBlU3RhbmRhcmQ6UmVjb3JkTmFtZSJdWzBdOwoJICAgICAgICByZXR1cm4gbmFtZTsKCSAgICB9Y2F0Y2goZXJyKXsKCSAgICAJcmV0dXJuICJObyBzdWNoIG9iamVjdCI7CgkgICAgfQoJfQoJZWxzZXsKCQljb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIiArCgkJIiBzZWFyY2ggLyIgKyB0eXBlICsgIiBTTUJTSUQgIiArIHNpZDsKCQl0cnl7CgkJCW91dHB1dCA9IGN1cnJBcHAuZG9TaGVsbFNjcmlwdChjb21tYW5kKTsKCQkJLy9leGFtcGxlIG91dHB1dDoKCQkJLy9yb290CQlTTUJTSUQgPSAoCiAgICAJCS8vIlMtMS01LTE4IgoJCQkvLykKCQkJLy9jaGVjayB0byBtYWtlIHN1cmUgd2UgYWN0dWFsbHkgZ290IGEgcmVzdWx0CgkJCWlmIChvdXRwdXQpewoJCQkJdXNlciA9IG91dHB1dC5zcGxpdCgiXG4iKVswXS5zcGxpdCgiXHQiKVswXS50cmltKCk7CgkJCQlyZXR1cm4gdXNlcjsKCQkJfQoJCQlyZXR1cm4gIkNvbW1hbmQgZXhlY3V0ZWQgcmV0dXJuZWQgbm8gb3V0cHV0OiAiICsgY29tbWFuZDsKCQl9CgkJY2F0Y2goZXJyKXsKCQkJcmV0dXJuIGVyci50b1N0cmluZygpOwoJCX0KCX0KfQpmdW5jdGlvbiBHZXRfRG9tYWluVXNlcih7QVBJPXRydWUsIHVzZXIsIGF0dHJpYnV0ZSwgcmVxdWVzdGVkX2RvbWFpbixsaW1pdD0wLCBoZWxwPWZhbHNlfSA9IHt9KXsKCS8vcmV0dXJucyBhbGwgdXNlcnMgb3Igc3BlY2lmaWMgdXNlciBvYmplY3RzIGluIEFECgkvL2NhbiBzcGVjaWZ5IGRpZmZlcmVudCBwcm9wZXJ0aWVzIHRoZXkgd2FudCByZXR1cm5lZAoJaWYoaGVscCl7CgkgICAgdmFyIG91dHB1dCA9ICIiOwoJCW91dHB1dCArPSAiXFxuTGlzdCBhbGwgZG9tYWluIHVzZXJzIG9yIGdldCBpbmZvcm1hdGlvbiBvbiBhIHNwZWNpZmljIHVzZXIuIElmIG5vIHVzZXIgaXMgc3BlY2lmaWVkLCBsaXN0IGFsbCB1c2Vycy4iOwoJCW91dHB1dCArPSAiXFxuXCJ1c2VyXCIgc2hvdWxkIGJlIGEgZG9tYWluIG5hbWUuIjsKCQlvdXRwdXQgKz0gIlxcblwiYXR0cmlidXRlXCIgc2hvdWxkIGJlIGEgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcyB0byBzZWxlY3QgZnJvbSB0aGUgcmV0dXJuZWQgdXNlci4gVGhpcyBvbmx5IHdvcmtzIGluIGNvbmp1bmN0aW9uIHdpdGggYSBzcGVjaWZpYyB1c2VyLCBub3Qgd2hlbiBsaXN0aW5nIG91dCBhbGwgdXNlcnMuIjsKCQlvdXRwdXQgKz0gIlxcblwicmVxdWVzdGVkX2RvbWFpblwiIHNob3VsZCBiZSB0aGUgTkVUQklPUyBkb21haW4gbmFtZSB0byBxdWVyeS4gTW9zdCBvZnRlbiB0aGlzIHdpbGwgYmUgbGVmdCBibGFuayBhbmQgYXV0byBmaWxsZWQgYnkgdGhlIGZ1bmN0aW9uLiI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Eb21haW5Vc2VyKCkgPC0tLSBsaXN0IG91dCBhbGwgZG9tYWluIHVzZXJzIjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0RvbWFpblVzZXIoe3VzZXI6XCJib2JcIixhdHRyaWJ1dGU6XCJuYW1lLCBTTUJTSURcIn0pOyI7CgkJb3V0cHV0ICs9ICJcXG5Ob3RlOiBjYW5ub3QgY3VycmVudGx5IHF1ZXJ5IG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgZm9yZXN0IjsKCQlyZXR1cm4gb3V0cHV0OwoJfQoJaWYgKEFQSSA9PSB0cnVlKXsKCQlpZih1c2VyKXsKCQkJaWYoYXR0cmlidXRlKXsKCQkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7dmFsdWU6dXNlciwgbWF0Y2g6IkNvbnRhaW5zIiwgcXVlcnlfYXR0cmlidXRlczoicmVjb3JkbmFtZSIsIHJldHVybl9hdHRyaWJ1dGVzOmF0dHJpYnV0ZS5zcGxpdCgiLCIpLCBtYXhfcmVzdWx0czpsaW1pdH0pOwoJCQl9ZWxzZXsKCQkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7dmFsdWU6dXNlciwgbWF0Y2g6IkNvbnRhaW5zIiwgcXVlcnlfYXR0cmlidXRlczoicmVjb3JkbmFtZSIsIG1heF9yZXN1bHRzOmxpbWl0fSk7CgkJCX0KCQkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KHF1ZXJ5LCBudWxsLCAyKTsKCQl9CgkJaWYoYXR0cmlidXRlKXsKCQkJdmFyIHF1ZXJ5ID0gR2V0X09EX09iamVjdENsYXNzKHtyZXR1cm5fYXR0cmlidXRlczphdHRyaWJ1dGUuc3BsaXQoIiwiKSwgbWF4X3Jlc3VsdHM6bGltaXR9KTsKCQkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KHF1ZXJ5LCBudWxsLCAyKTsKCQl9CgkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KEdldF9PRF9PYmplY3RDbGFzcyh7bWF4X3Jlc3VsdHM6bGltaXR9KSwgbnVsbCwgMik7Cgl9CgllbHNlewoJCWRvbWFpbiA9IHJlcXVlc3RlZF9kb21haW4gPyByZXF1ZXN0ZWRfZG9tYWluIDogR2V0X0N1cnJlbnRORVRCSU9TRG9tYWluKEFQSSk7CgkJaWYodXNlcil7CgkJCWNvbW1hbmQgPSAiZHNjbCBcIi9BY3RpdmUgRGlyZWN0b3J5LyIgKyBkb21haW4gKyAiL0FsbCBEb21haW5zXCIgcmVhZCAvVXNlcnMvIiArIHVzZXI7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCQljb21tYW5kICs9ICIgIiArIGF0dHJpYnV0ZTsKCQkJfQoJCX0KCQllbHNlewoJCQljb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIGxzIC9Vc2VycyI7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCSAgICBjb21tYW5kICs9ICIgIiArIGF0dHJpYnV0ZTsKCQkJfQoJCX0KCQl0cnl7CgkJICAgIC8vY29uc29sZS5sb2coY29tbWFuZCk7CgkJCW91dHB1dCA9IGN1cnJBcHAuZG9TaGVsbFNjcmlwdChjb21tYW5kKTsKCQkJcmV0dXJuIG91dHB1dDsKCQl9CgkJY2F0Y2goZXJyKXsKCQkJcmV0dXJuIGVyci50b1N0cmluZygpOwoJCX0KCX0KfQpmdW5jdGlvbiBHZXRfRG9tYWluVXNlclZpYUF0dHJpYnV0ZSh7QVBJPXRydWUsIHZhbHVlLCBhdHRyaWJ1dGUsIHJldHVybl9hdHRyaWJ1dGVzX2xpc3Q9W251bGxdLGxpbWl0PTAsIGhlbHA9ZmFsc2V9ID0ge30pewoJaWYoaGVscCl7CgkJcmV0dXJuICJRdWVyaWVzIFVzZXJzIGZvciB0aGUgYGF0dHJpYnV0ZWAgd2hpY2ggY29udGFpbnMgYHZhbHVlYCBhbmQgcmV0dXJucyBhbGwgbWF0Y2hpbmcgb2JqZWN0J3MgYXR0cmlidXRlcyBzcGVjaWZpZWQgaW4gYHJldHVybl9hdHRyaWJ1dGVzX2xpc3RgLiIKCX0KCWlmIChBUEkgPT0gdHJ1ZSl7CgkJbGV0IHF1ZXJ5ID0gR2V0X09EX09iamVjdENsYXNzKHt2YWx1ZTp2YWx1ZSwgbWF0Y2g6IkNvbnRhaW5zIiwgcXVlcnlfYXR0cmlidXRlczphdHRyaWJ1dGUsIG1heF9yZXN1bHRzOmxpbWl0LCByZXR1cm5fYXR0cmlidXRlczpyZXR1cm5fYXR0cmlidXRlc19saXN0fSk7CgkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KHF1ZXJ5LCBudWxsLCAyKTsKCX0gZWxzZXsKCQlyZXR1cm4gIk9ubHkgQVBJIHN1cHBvcnRlZCI7Cgl9Cn0KZnVuY3Rpb24gR2V0X0xvY2FsVXNlcih7QVBJPXRydWUsIHVzZXIsIGF0dHJpYnV0ZSwgbGltaXQ9MCwgaGVscD1mYWxzZX0gPSB7fSl7CgkvL3JldHVybnMgYWxsIHVzZXJzIG9yIHNwZWNpZmljIHVzZXIgb2JqZWN0cyBpbiBBRAoJLy9jYW4gc3BlY2lmeSBkaWZmZXJlbnQgcHJvcGVydGllcyB0aGV5IHdhbnQgcmV0dXJuZWQKCWlmKGhlbHApewoJICAgIHZhciBvdXRwdXQgPSAiIjsKCQlvdXRwdXQgKz0gIlxcbkxpc3QgYWxsIGxvY2FsIHVzZXJzIG9yIGdldCBpbmZvcm1hdGlvbiBvbiBhIHNwZWNpZmljIHVzZXIuIElmIG5vIHVzZXIgaXMgc3BlY2lmaWVkLCBsaXN0IGFsbCB1c2Vycy4iOwoJCW91dHB1dCArPSAiXFxuXCJ1c2VyXCIgc2hvdWxkIGJlIGEgbG9jYWwgdXNlcidzIG5hbWUuIjsKCQlvdXRwdXQgKz0gIlxcblwiYXR0cmlidXRlc1wiIHNob3VsZCBiZSBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXMgdG8gc2VsZWN0IGZyb20gdGhlIHJldHVybmVkIHVzZXIuIFRoaXMgb25seSB3b3JrcyBpbiBjb25qdW5jdGlvbiB3aXRoIGEgc3BlY2lmaWMgdXNlciwgbm90IHdoZW4gbGlzdGluZyBvdXQgYWxsIHVzZXJzLiI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Mb2NhbFVzZXIoKSA8LS0tIGxpc3Qgb3V0IGFsbCBsb2NhbCB1c2VycyI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Mb2NhbFVzZXIoe3VzZXI6XCJib2JcIixhdHRyaWJ1dGU6XCJuYW1lLCBTTUJTSURcIn0pOyI7CgkJcmV0dXJuIG91dHB1dDsKCX0KCWlmIChBUEkgPT0gdHJ1ZSl7CgkJaWYodXNlcil7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCQl2YXIgcXVlcnkgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe3ZhbHVlOnVzZXIsIG1hdGNoOiJDb250YWlucyIsIHF1ZXJ5X2F0dHJpYnV0ZXM6InJlY29yZG5hbWUiLCByZXR1cm5fYXR0cmlidXRlczphdHRyaWJ1dGUuc3BsaXQoIiwiKSwgbWF4X3Jlc3VsdHM6bGltaXQsIG5vZGV0eXBlOiJsb2NhbCJ9KTsKCQkJfWVsc2V7CgkJCQl2YXIgcXVlcnkgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe3ZhbHVlOnVzZXIsIG1hdGNoOiJDb250YWlucyIsIHF1ZXJ5X2F0dHJpYnV0ZXM6InJlY29yZG5hbWUiLCBtYXhfcmVzdWx0czpsaW1pdCwgbm9kZXR5cGU6ImxvY2FsIn0pOwoJCQl9CgkJCXJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeSwgbnVsbCwgMik7CgkJfQoJCWlmKGF0dHJpYnV0ZSl7CgkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7cmV0dXJuX2F0dHJpYnV0ZXM6YXR0cmlidXRlLnNwbGl0KCIsIiksIG1heF9yZXN1bHRzOmxpbWl0LCBub2RldHlwZToibG9jYWwifSk7CgkJCXJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeSwgbnVsbCwgMik7CgkJfQoJCXJldHVybiBKU09OLnN0cmluZ2lmeShHZXRfT0RfT2JqZWN0Q2xhc3Moe21heF9yZXN1bHRzOmxpbWl0LCBub2RldHlwZToibG9jYWwifSksIG51bGwsIDIpOwoJfQoJZWxzZXsKCQlpZih1c2VyKXsKCQkJY29tbWFuZCA9ICJkc2NsIC4gcmVhZCAvVXNlcnMvIiArIHVzZXI7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCQljb21tYW5kICs9ICIgIiArIGF0dHJpYnV0ZTsKCQkJfQoJCX0KCQllbHNlewoJCQljb21tYW5kID0gImRzY2wgLiBscyAvVXNlcnMiOwoJCQlpZihhdHRyaWJ1dGUpewoJCQkgICAgY29tbWFuZCArPSAiICIgKyBhdHRyaWJ1dGU7CgkJCX0KCQl9CgkJdHJ5ewoJCSAgICAvL2NvbnNvbGUubG9nKGNvbW1hbmQpOwoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoY29tbWFuZCk7CgkJCXJldHVybiBvdXRwdXQ7CgkJfQoJCWNhdGNoKGVycil7CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gR2V0X0RvbWFpbkNvbXB1dGVyKHtBUEk9dHJ1ZSwgY29tcHV0ZXIsIGF0dHJpYnV0ZSwgbGltaXQ9MCwgcmVxdWVzdGVkX2RvbWFpbixoZWxwPWZhbHNlfSA9IHt9KXsKCS8vcmV0dXJucyBhbGwgY29tcHV0ZXJzIG9yIHNwZWNpZmljIGNvbXB1dGVyIG9iamVjdHMgaW4gQUQKCWlmKGhlbHApewoJICAgIHZhciBvdXRwdXQgPSAiIjsKCQlvdXRwdXQgKz0gIlxcbkxpc3QgYWxsIGRvbWFpbiBjb21wdXRlcnMgb3IgZ2V0IGluZm9ybWF0aW9uIG9uIGEgc3BlY2lmaWMgY29tcHV0ZXIuIElmIG5vIGNvbXB1dGVyIGlzIHNwZWNpZmllZCwgbGlzdCBhbGwgY29tcHV0ZXIuIjsKCQlvdXRwdXQgKz0gIlxcblwiY29tcHV0ZXJcIiBzaG91bGQgYmUgYSBkb21haW4gY29tcHV0ZXIgbmFtZS4iOwoJCW91dHB1dCArPSAiXFxuXCJhdHRyaWJ1dGVzXCIgc2hvdWxkIGJlIGEgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcyB0byBzZWxlY3QgZnJvbSB0aGUgcmV0dXJuZWQgY29tcHV0ZXIuIFRoaXMgb25seSB3b3JrcyBpbiBjb25qdW5jdGlvbiB3aXRoIGEgc3BlY2lmaWMgY29tcHV0ZXIsIG5vdCB3aGVuIGxpc3Rpbmcgb3V0IGFsbCBjb21wdXRlcnMuIjsKCQlvdXRwdXQgKz0gIlxcblwicmVxdWVzdGVkX2RvbWFpblwiIHNob3VsZCBiZSB0aGUgTkVUQklPUyBkb21haW4gbmFtZSB0byBxdWVyeS4gTW9zdCBvZnRlbiB0aGlzIHdpbGwgYmUgbGVmdCBibGFuayBhbmQgYXV0byBmaWxsZWQgYnkgdGhlIGZ1bmN0aW9uLiI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Eb21haW5Db21wdXRlcigpIDwtLS0gbGlzdCBvdXQgYWxsIGRvbWFpbiBjb21wdXRlcnMiOwoJCW91dHB1dCArPSAiXFxuY2FsbGVkOiBHZXRfRG9tYWluQ29tcHV0ZXIoe2NvbXB1dGVyOlwidGVzdG1hYyRcIixhdHRyaWJ1dGU6XCJuYW1lXCJ9KTsiOwoJCXJldHVybiBvdXRwdXQ7Cgl9CglpZiAoQVBJID09IHRydWUpewoJCWlmKGNvbXB1dGVyKXsKCQkJaWYoYXR0cmlidXRlKXsKCQkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6IkNvbXB1dGVycyIsIHZhbHVlOmNvbXB1dGVyLCBtYXRjaDoiQ29udGFpbnMiLCBxdWVyeV9hdHRyaWJ1dGVzOiJyZWNvcmRuYW1lIiwgcmV0dXJuX2F0dHJpYnV0ZXM6YXR0cmlidXRlLnNwbGl0KCIsIiksIG1heF9yZXN1bHRzOmxpbWl0fSk7CgkJCX1lbHNlewoJCQkJdmFyIHF1ZXJ5ID0gR2V0X09EX09iamVjdENsYXNzKHtvYmplY3RjbGFzczoiQ29tcHV0ZXJzIiwgdmFsdWU6Y29tcHV0ZXIsIG1hdGNoOiJDb250YWlucyIsIHF1ZXJ5X2F0dHJpYnV0ZXM6InJlY29yZG5hbWUiLCBtYXhfcmVzdWx0czpsaW1pdH0pOwoJCQl9CgkJCXJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeSwgbnVsbCwgMik7CgkJfQoJCWlmKGF0dHJpYnV0ZSl7CgkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6IkNvbXB1dGVycyIsIHJldHVybl9hdHRyaWJ1dGVzOmF0dHJpYnV0ZS5zcGxpdCgiLCIpLCBtYXhfcmVzdWx0czpsaW1pdH0pOwoJCQlyZXR1cm4gSlNPTi5zdHJpbmdpZnkocXVlcnksIG51bGwsIDIpOwoJCX0KCQlyZXR1cm4gSlNPTi5zdHJpbmdpZnkoR2V0X09EX09iamVjdENsYXNzKHtvYmplY3RjbGFzczoiQ29tcHV0ZXJzIiwgbWF4X3Jlc3VsdHM6bGltaXR9KSwgbnVsbCwgMik7Cgl9CgllbHNlewoJCWRvbWFpbiA9IHJlcXVlc3RlZF9kb21haW4gPyByZXF1ZXN0ZWRfZG9tYWluIDogR2V0X0N1cnJlbnRORVRCSU9TRG9tYWluKEFQSSk7CgkJaWYoY29tcHV0ZXIpewoJCQljb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIHJlYWQgXCIvQ29tcHV0ZXJzLyIgKyBjb21wdXRlciArICJcIiI7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCQljb21tYW5kICs9ICIgIiArIGF0dHJpYnV0ZTsKCQkJfQoJCX0KCQllbHNlewoJCQljb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIGxzIC9Db21wdXRlcnMiOwoJCQlpZihhdHRyaWJ1dGUpewoJCQkgICAgY29tbWFuZCArPSAiICIgKyBhdHRyaWJ1dGU7CgkJCX0KCQl9CgkJdHJ5ewoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoY29tbWFuZCk7CgkJCXJldHVybiBvdXRwdXQ7CgkJfQoJCWNhdGNoKGVycil7CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gR2V0X0RvbWFpbkNvbXB1dGVyVmlhQXR0cmlidXRlKHtBUEk9dHJ1ZSwgdmFsdWUsIGF0dHJpYnV0ZSwgbGltaXQ9MCwgcmV0dXJuX2F0dHJpYnV0ZXNfbGlzdD1bbnVsbF0saGVscD1mYWxzZX0gPSB7fSl7CgkvL3JldHVybnMgYWxsIGNvbXB1dGVycyBvciBzcGVjaWZpYyBjb21wdXRlciBvYmplY3RzIGluIEFECglpZihoZWxwKXsKCQlyZXR1cm4gIlF1ZXJpZXMgQ29tcHV0ZXJzIGZvciB0aGUgYGF0dHJpYnV0ZWAgd2hpY2ggY29udGFpbnMgYHZhbHVlYCBhbmQgcmV0dXJucyBhbGwgbWF0Y2hpbmcgb2JqZWN0J3MgYXR0cmlidXRlcyBzcGVjaWZpZWQgaW4gYHJldHVybl9hdHRyaWJ1dGVzX2xpc3RgLiIKCX0KCWlmIChBUEkgPT0gdHJ1ZSl7CgkJbGV0IHF1ZXJ5ID0gR2V0X09EX09iamVjdENsYXNzKHtvYmplY3RjbGFzczoiQ29tcHV0ZXJzIiwgdmFsdWU6dmFsdWUsIG1hdGNoOiJDb250YWlucyIsIHF1ZXJ5X2F0dHJpYnV0ZXM6YXR0cmlidXRlLCBtYXhfcmVzdWx0czpsaW1pdCwgcmV0dXJuX2F0dHJpYnV0ZXM6cmV0dXJuX2F0dHJpYnV0ZXNfbGlzdH0pOwoJCXJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeSwgbnVsbCwgMik7Cgl9IGVsc2V7CgkJcmV0dXJuICJPbmx5IEFQSSBzdXBwb3J0ZWQiOwoJfQoKfQpmdW5jdGlvbiBHZXRfTERBUFNlYXJjaCh7QVBJPWZhbHNlLCBjdXJyRG9tYWluLCByZW1vdGVEb21haW4sIG51bVJlc3VsdHM9MCwgcXVlcnk9IiIsIGF0dHJpYnV0ZSxoZWxwPWZhbHNlfSA9IHt9KXsKCWlmKGhlbHApewoJICAgIHZhciBvdXRwdXQgPSAiIjsKCQlvdXRwdXQgKz0gIlxcbkV4ZWN1dGUgYSBjdXN0b21pemVkIExEQVAgc2VhcmNoIHF1ZXJ5IjsKCQlvdXRwdXQgKz0gIlxcblwiY3VyckRvbWFpblwiIHNob3VsZCBiZSB0aGUgZG9tYWluIHRvIHF1ZXJ5LiBFeDogaW4gbGRhcDovL2N1cnJEb21haW4uIjsKCQlvdXRwdXQgKz0gIlxcblwicmVtb3RlRG9tYWluXCIgc2hvdWxkIGJlIHRoZSBzZWFyY2ggYmFzZSwgdHlwaWNhbGx5IHRoZSBzYW1lIGFzIHRoZSBjdXJyRG9tYWluLCBzbyBpdCBjYW4gYmUgbGVmdCBvdXQuIjsKCQlvdXRwdXQgKz0gIlxcblwibnVtUmVzdWx0c1wiIHNwZWNpZmllcyBob3cgbWFueSByZXN1bHRzIHRvIHJldHVybiB3aGVyZSAwIGluZGljYXRlcyBhbGwgcmVzdWx0cy4iOwoJCW91dHB1dCArPSAiXFxuXCJxdWVyeVwiIGlzIHRoZSBMREFQIHF1ZXJ5LiI7CgkJb3V0cHV0ICs9ICJcXG5cImF0dHJpYnV0ZXNcIiBpcyBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXMgdG8gc2VsZXQgZnJvbSB0aGUgcXVlcnkgcmVzdWx0cy4iOwoJCW91dHB1dCArPSAiXFxuY2FsbGVkOiBHZXRfTERBUFNlYXJjaCh7cXVlcnk9XCIob2JqZWN0Y2xhc3M9dXNlcilcIn0pIjsKCQlyZXR1cm4gb3V0cHV0OwoJfQoJaWYoQVBJID09IHRydWUpewogICAgICAgIHJldHVybiAiQVBJIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQgeWV0IjsKCX0KCWVsc2V7CgkJZG9tYWluID0gY3VyckRvbWFpbiA/IGN1cnJEb21haW4gOiBHZXRfQ3VycmVudERvbWFpbihBUEkpOwoJCWFkanVzdCA9IHJlbW90ZURvbWFpbiA/IHJlbW90ZURvbWFpbi5zcGxpdCgiLiIpIDogZG9tYWluLnNwbGl0KCIuIik7CgkJcmRvbWFpbiA9ICIiOwoJCWZvcih2YXIgaSA9IDA7IGkgPCBhZGp1c3QubGVuZ3RoOyBpKyspewoJCQlyZG9tYWluICs9ICJEQz0iICsgYWRqdXN0W2ldOwoJCQlpZihpKzEgPCBhZGp1c3QubGVuZ3RoKXsKCQkJCXJkb21haW4gKz0gIiwiCgkJCX0KCQl9CgkJY29tbWFuZCA9ICJsZGFwc2VhcmNoIC1IIGxkYXA6Ly8iICsgZG9tYWluICsgIiAtYiAiICsgcmRvbWFpbiArICIgLXogIiArIG51bVJlc3VsdHMgKyAiIFwiIiArIHF1ZXJ5ICsgIlwiICI7CgkJaWYoYXR0cmlidXRlKXsKCQkJY29tbWFuZCArPSBhdHRyaWJ1dGU7CgkJfQoJCS8vY29uc29sZS5sb2coY29tbWFuZCk7CgkJdHJ5ewoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoY29tbWFuZCk7CgkJCXJldHVybiBvdXRwdXQ7CgkJfQoJCWNhdGNoKGVycil7CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gR2V0X0RvbWFpbk9VKHtBUEk9ZmFsc2UsIE9VLCBhdHRyaWJ1dGUsIHJlcXVlc3RlZF9kb21haW4saGVscD1mYWxzZX0gPSB7fSl7CgkvL3NlYXJjaCBmb3IgYWxsIE9VcyBvciBzcGVjaWZpYyBPVSBvYmplY3RzIGluIEFECglpZihoZWxwKXsKCSAgICB2YXIgb3V0cHV0ID0gIiI7CgkJb3V0cHV0ICs9ICJcXG5MaXN0IGFsbCBkb21haW4gT1VzIG9yIGdldCBpbmZvcm1hdGlvbiBvbiBhIHNwZWNpZmljIE9VLiBJZiBubyBPVSBpcyBzcGVjaWZpZWQsIGxpc3QgYWxsIE9Vcy4iOwoJCW91dHB1dCArPSAiXFxuXCJPVVwiIHNob3VsZCBiZSBhIGRvbWFpbiBPVSBuYW1lLiI7CgkJb3V0cHV0ICs9ICJcXG5cImF0dHJpYnV0ZXNcIiBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzIHRvIHNlbGVjdCBmcm9tIHRoZSByZXR1cm5lZCBPVS4gVGhpcyBvbmx5IHdvcmtzIGluIGNvbmp1bmN0aW9uIHdpdGggYSBzcGVjaWZpYyBPVSwgbm90IHdoZW4gbGlzdGluZyBvdXQgYWxsIE9Vcy4iOwoJCW91dHB1dCArPSAiXFxuXCJyZXF1ZXN0ZWRfZG9tYWluXCIgc2hvdWxkIGJlIHRoZSBORVRCSU9TIGRvbWFpbiBuYW1lIHRvIHF1ZXJ5LiBNb3N0IG9mdGVuIHRoaXMgd2lsbCBiZSBsZWZ0IGJsYW5rIGFuZCBhdXRvIGZpbGxlZCBieSB0aGUgZnVuY3Rpb24uIjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0RvbWFpbk9VKCkgPC0tLSBsaXN0IG91dCBhbGwgZG9tYWluIGNvbXB1dGVycyI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Eb21haW5PVSh7T1U6XCJEb21haW4gQ29udHJvbGxlcnNcIn0pOyI7CgkJcmV0dXJuIG91dHB1dDsKCX0KCWlmIChBUEkgPT0gdHJ1ZSl7CiAgICAgICAgcmV0dXJuICJBUEkgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZCB5ZXQiOwoJfQoJZWxzZXsKCQlkb21haW4gPSByZXF1ZXN0ZWRfZG9tYWluID8gcmVxdWVzdGVkX2RvbWFpbiA6IEdldF9DdXJyZW50TkVUQklPU0RvbWFpbihBUEkpOwoJCWlmKE9VKXsKCQkJY29tbWFuZCA9ICJkc2NsIFwiL0FjdGl2ZSBEaXJlY3RvcnkvIiArIGRvbWFpbiArICIvQWxsIERvbWFpbnNcIiByZWFkIFwiL09yZ2FuaXphdGlvbmFsVW5pdC8iICsgT1UgKyAiXCIiOwoJCQlpZihhdHRyaWJ1dGUpewoJCQkJY29tbWFuZCArPSAiICIgKyBhdHRyaWJ1dGU7CgkJCX0KCQl9CgkJZWxzZXsKCQkJY29tbWFuZCA9ICJkc2NsIFwiL0FjdGl2ZSBEaXJlY3RvcnkvIiArIGRvbWFpbiArICIvQWxsIERvbWFpbnNcIiBscyAvT3JnYW5pemF0aW9uYWxVbml0IjsKCQkJaWYoYXR0cmlidXRlKXsKCQkJICAgIGNvbW1hbmQgKz0gIiAiICsgYXR0cmlidXRlOwoJCQl9CgkJfQoJCXRyeXsKCQkJb3V0cHV0ID0gY3VyckFwcC5kb1NoZWxsU2NyaXB0KGNvbW1hbmQpOwoJCQlyZXR1cm4gb3V0cHV0OwoJCX0KCQljYXRjaChlcnIpewoJCQlyZXR1cm4gZXJyLnRvU3RyaW5nKCk7CgkJfQoJfQp9CmZ1bmN0aW9uIEdldF9Eb21haW5TSUQoe0FQST10cnVlLGhlbHA9ZmFsc2V9ID0ge30pewoJLy9yZXR1cm5zIFNJRCBmb3IgY3VycmVudCBkb21haW4gb3Igc3BlY2lmaWVkIGRvbWFpbgoJaWYoaGVscCl7CgkgICAgdmFyIG91dHB1dCA9ICIiOwoJCW91dHB1dCArPSAiXFxuR2V0cyB0aGUgU0lEIG9mIHRoZSBkb21haW4gYnkgdHJ1bmNhdGluZyB0aGUgU0lEIGZvciB0aGUgXCJEb21haW4gQWRtaW5zXCIgZ3JvdXAuIjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0RvbWFpblNJRCgpIjsKCQlyZXR1cm4gb3V0cHV0OwoJfQoJaWYoQVBJID09IHRydWUpewoJCXZhciBkb21haW4gPSBHZXRfQ3VycmVudE5FVEJJT1NEb21haW4oQVBJKTsKCQl2YXIgc2VhcmNoX3ZhbHVlID0gZG9tYWluICsgIlxcRG9tYWluIENvbXB1dGVycyI7CgkJdmFyIGRvbWFpbl9jb21wdXRlcnMgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe29iamVjdGNsYXNzOiJHcm91cHMiLCBtYXhfcmVzdWx0czoxLCB2YWx1ZTpzZWFyY2hfdmFsdWUsIG1hdGNoOiJDb250YWlucyIsIHF1ZXJ5X2F0dHJpYnV0ZXM6IlJlY29yZE5hbWUiLCByZXR1cm5fYXR0cmlidXRlczpbIlNNQlNJRCJdfSk7CiAgICAgICAgdmFyIHNpZCA9IGRvbWFpbl9jb21wdXRlcnNbIkdyb3VwcyJdWzBdWyJkc0F0dHJUeXBlU3RhbmRhcmQ6U01CU0lEIl1bMF07CiAgICAgICAgdmFyIHNpZF9hcnJheSA9IHNpZC5zcGxpdCgiLSIpOwogICAgICAgIHJldHVybiBzaWRfYXJyYXkuc2xpY2UoMCwgc2lkX2FycmF5Lmxlbmd0aC0xKS5qb2luKCItIik7Cgl9CgllbHNlewoJCWNvbW1hbmQgPSAiZHNtZW1iZXJ1dGlsIGdldHNpZCAtRyBcIkRvbWFpbiBBZG1pbnNcIiI7CgkJdHJ5ewoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoY29tbWFuZCk7CgkJCXJldHVybiBvdXRwdXQuc2xpY2UoMCwtNCk7IC8vdGFrZSBvZmYgdGhlIGxhc3QgLTUxMiBvbiB0aGUgU0lEIHRoYXQncyBzcGVjaWZpYyB0byBEb21haW4gQWRtaW5zIGdyb3VwCgkJfQoJCWNhdGNoKGVycil7CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gR2V0X0RvbWFpbkdyb3VwKHtBUEk9dHJ1ZSwgZ3JvdXAsIGF0dHJpYnV0ZSwgcmVxdWVzdGVkX2RvbWFpbixoZWxwPWZhbHNlLHZlcmJvc2U9ZmFsc2UsIGxpbWl0PTB9ID0ge30pewoJLy9yZXR1cm5zIGFsbCBncm91cHMgb3Igc3BlY2lmaWMgZ3JvdXBzIGluIGFuIEFECglpZihoZWxwKXsKCSAgICB2YXIgb3V0cHV0ID0gIiI7CgkJb3V0cHV0ICs9ICJcXG5MaXN0IGFsbCBkb21haW4gZ3JvdXBzIG9yIGdldCBpbmZvcm1hdGlvbiBvbiBhIHNwZWNpZmljIGdyb3VwLiBJZiBubyBncm91cCBpcyBzcGVjaWZpZWQsIGxpc3QgYWxsIGdyb3Vwcy4iOwoJCW91dHB1dCArPSAiXFxuXCJncm91cFwiIHNob3VsZCBiZSBhIGRvbWFpbiBncm91cCBuYW1lLiI7CgkJb3V0cHV0ICs9ICJcXG5cImF0dHJpYnV0ZXNcIiBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzIHRvIHNlbGVjdCBmcm9tIHRoZSByZXR1cm5lZCBncm91cC4gVGhpcyBvbmx5IHdvcmtzIGluIGNvbmp1bmN0aW9uIHdpdGggYSBzcGVjaWZpYyBncm91cCwgbm90IHdoZW4gbGlzdGluZyBvdXQgYWxsIGdyb3VwLiI7CgkJb3V0cHV0ICs9ICJcXG5cInJlcXVlc3RlZF9kb21haW5cIiBzaG91bGQgYmUgdGhlIE5FVEJJT1MgZG9tYWluIG5hbWUgdG8gcXVlcnkuIE1vc3Qgb2Z0ZW4gdGhpcyB3aWxsIGJlIGxlZnQgYmxhbmsgYW5kIGF1dG8gZmlsbGVkIGJ5IHRoZSBmdW5jdGlvbi4iOwoJCW91dHB1dCArPSAiXFxuY2FsbGVkOiBHZXRfRG9tYWluR3JvdXAoKSA8LS0tIGxpc3Qgb3V0IGFsbCBkb21haW4gZ3JvdXBzIjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0RvbWFpbkdyb3VwKHtncm91cDpcIkRvbWFpbiBBZG1pbnNcIixhdHRyaWJ1dGU6XCJHcm91cE1lbWJlcnNoaXBcIn0pOyI7CgkJcmV0dXJuIG91dHB1dDsKCX0KCWlmKEFQSSA9PSB0cnVlKXsKICAgICAgICBpZihncm91cCl7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCQl2YXIgcXVlcnkgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe29iamVjdGNsYXNzOiJHcm91cHMiLCB2YWx1ZTpncm91cCwgbWF0Y2g6IkNvbnRhaW5zIiwgcXVlcnlfYXR0cmlidXRlczoicmVjb3JkbmFtZSIsIHJldHVybl9hdHRyaWJ1dGVzOmF0dHJpYnV0ZS5zcGxpdCgiLCIpLCBtYXhfcmVzdWx0czpsaW1pdH0pOwoJCQl9ZWxzZXsKCQkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6Ikdyb3VwcyIsIHZhbHVlOmdyb3VwLCBtYXRjaDoiQ29udGFpbnMiLCBxdWVyeV9hdHRyaWJ1dGVzOiJyZWNvcmRuYW1lIiwgbWF4X3Jlc3VsdHM6bGltaXR9KTsKCQkJfQoJCQlyZXR1cm4gSlNPTi5zdHJpbmdpZnkocXVlcnksIG51bGwsIDIpOwoJCX0KCQlpZihhdHRyaWJ1dGUpewoJCQl2YXIgcXVlcnkgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe29iamVjdGNsYXNzOiJHcm91cHMiLCByZXR1cm5fYXR0cmlidXRlczphdHRyaWJ1dGUuc3BsaXQoIiwiKSwgbWF4X3Jlc3VsdHM6bGltaXR9KTsKCQkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KHF1ZXJ5LCBudWxsLCAyKTsKCQl9CgkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6Ikdyb3VwcyIsIG1heF9yZXN1bHRzOmxpbWl0fSksIG51bGwsIDIpOwoJfQoJZWxzZXsKCQlkb21haW4gPSByZXF1ZXN0ZWRfZG9tYWluID8gcmVxdWVzdGVkX2RvbWFpbiA6IEdldF9DdXJyZW50TkVUQklPU0RvbWFpbihBUEkpOwoJCWlmKGdyb3VwKXsKCQkgICAgaWYodmVyYm9zZSl7CiAgICAgICAgICAgICAgICBjb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIHJlYWQgXCIvR3JvdXBzLyIgKyBncm91cCArICJcIiI7CiAgICAgICAgICAgICAgICBpZihhdHRyaWJ1dGUpewogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgKz0gIiAiICsgYXR0cmlidXRlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGNvbW1hbmQgPSAiZHNjYWNoZXV0aWwgLXEgZ3JvdXAgLWEgbmFtZSBcIiIgKyBncm91cCArICJcIiI7CiAgICAgICAgICAgIH0KCQl9CgkJZWxzZXsKCQkJY29tbWFuZCA9ICJkc2NsIFwiL0FjdGl2ZSBEaXJlY3RvcnkvIiArIGRvbWFpbiArICIvQWxsIERvbWFpbnNcIiBscyAvR3JvdXBzIjsKCQkJaWYoYXR0cmlidXRlKXsKCQkJICAgIGNvbW1hbmQgKz0gIiAiICsgYXR0cmlidXRlOwoJCQl9CgkJfQoJCXRyeXsKCQkJb3V0cHV0ID0gY3VyckFwcC5kb1NoZWxsU2NyaXB0KGNvbW1hbmQpOwoJCQlyZXR1cm4gb3V0cHV0OwoJCX0KCQljYXRjaChlcnIpewoJCQlyZXR1cm4gZXJyLnRvU3RyaW5nKCk7CgkJfQoJfQp9CmZ1bmN0aW9uIEdldF9Mb2NhbEdyb3VwKHtBUEk9dHJ1ZSwgZ3JvdXAsIGF0dHJpYnV0ZSxoZWxwPWZhbHNlLCB2ZXJib3NlPWZhbHNlLCBsaW1pdD0wfSA9IHt9KXsKCS8vcmV0dXJucyBhbGwgZ3JvdXBzIG9yIHNwZWNpZmljIGdyb3VwcyBpbiBhbiBBRAoJaWYoaGVscCl7CgkgICAgdmFyIG91dHB1dCA9ICIiOwoJCW91dHB1dCArPSAiXFxuTGlzdCBhbGwgbG9jYWwgZ3JvdXBzIG9yIGdldCBpbmZvcm1hdGlvbiBvbiBhIHNwZWNpZmljIGdyb3VwLiBJZiBubyBncm91cCBpcyBzcGVjaWZpZWQsIGxpc3QgYWxsIGdyb3Vwcy4iOwoJCW91dHB1dCArPSAiXFxuXCJncm91cFwiIHNob3VsZCBiZSBhIGxvY2FsIGdyb3VwIG5hbWUuIjsKCQlvdXRwdXQgKz0gIlxcblwidmVyYm9zZVwiIGdldCBtb3JlIHZlcmJvc2Ugb3V0cHV0IHdpdGggZHNjbCBpbnN0ZWFkIG9mIGRzY2FjaGV1dGlsIgoJCW91dHB1dCArPSAiXFxuXCJhdHRyaWJ1dGVzXCIgc2hvdWxkIGJlIGEgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcyB0byBzZWxlY3QgZnJvbSB0aGUgcmV0dXJuZWQgZ3JvdXAuIFRoaXMgb25seSB3b3JrcyBpbiBjb25qdW5jdGlvbiB3aXRoIGEgc3BlY2lmaWMgZ3JvdXAsIG5vdCB3aGVuIGxpc3Rpbmcgb3V0IGFsbCBncm91cHMsIGFuZCBvbmx5IHdoZW4gdmVyYm9zZSBpcyB0cnVlLiI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Mb2NhbEdyb3VwKCkgPC0tLSBsaXN0IG91dCBhbGwgZG9tYWluIGdyb3VwcyI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9Mb2NhbEdyb3VwKHtncm91cDpcImFkbWluXCIsYXR0cmlidXRlczpcIkdyb3VwTWVtYmVyc2hpcFwifSk7IjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0xvY2FsR3JvdXAoe2F0dHJpYnV0ZTpcIkdyb3VwTWVtYmVyc2hpcFwiLCB2ZXJib3NlOnRydWV9KTsgPC0tLSBnZXQgYSBtYXBwaW5nIG9mIGFsbCBncm91cHMgYW5kIHRoZWlyIEdyb3VwTWVtYmVyc2hpcCI7CgkJcmV0dXJuIG91dHB1dDsKCX0KCWlmKEFQSSA9PSB0cnVlKXsKICAgICAgICBpZihncm91cCl7CgkJCWlmKGF0dHJpYnV0ZSl7CgkJCQl2YXIgcXVlcnkgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe29iamVjdGNsYXNzOiJHcm91cHMiLCB2YWx1ZTpncm91cCwgbWF0Y2g6IkNvbnRhaW5zIiwgcXVlcnlfYXR0cmlidXRlczoicmVjb3JkbmFtZSIsIHJldHVybl9hdHRyaWJ1dGVzOmF0dHJpYnV0ZS5zcGxpdCgiLCIpLCBtYXhfcmVzdWx0czpsaW1pdCwgbm9kZXR5cGU6ImxvY2FsIn0pOwoJCQl9ZWxzZXsKCQkJCXZhciBxdWVyeSA9IEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6Ikdyb3VwcyIsIHZhbHVlOmdyb3VwLCBtYXRjaDoiQ29udGFpbnMiLCBxdWVyeV9hdHRyaWJ1dGVzOiJyZWNvcmRuYW1lIiwgbWF4X3Jlc3VsdHM6bGltaXQsIG5vZGV0eXBlOiJsb2NhbCJ9KTsKCQkJfQoJCQlyZXR1cm4gSlNPTi5zdHJpbmdpZnkocXVlcnksIG51bGwsIDIpOwoJCX0KCQlpZihhdHRyaWJ1dGUpewoJCQl2YXIgcXVlcnkgPSBHZXRfT0RfT2JqZWN0Q2xhc3Moe29iamVjdGNsYXNzOiJHcm91cHMiLCByZXR1cm5fYXR0cmlidXRlczphdHRyaWJ1dGUuc3BsaXQoIiwiKSwgbWF4X3Jlc3VsdHM6bGltaXQsIG5vZGV0eXBlOiJsb2NhbCJ9KTsKCQkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KHF1ZXJ5LCBudWxsLCAyKTsKCQl9CgkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KEdldF9PRF9PYmplY3RDbGFzcyh7b2JqZWN0Y2xhc3M6Ikdyb3VwcyIsIG1heF9yZXN1bHRzOmxpbWl0LCBub2RldHlwZToibG9jYWwifSksIG51bGwsIDIpOwoJfQoJZWxzZXsKCQlpZihncm91cCl7CgkJICAgIGlmKHZlcmJvc2UpewogICAgICAgICAgICAgICAgY29tbWFuZCA9ICJkc2NsIC4gcmVhZCBcIi9Hcm91cHMvIiArIGdyb3VwICsgIlwiIjsKICAgICAgICAgICAgICAgIGlmKGF0dHJpYnV0ZSl7CiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCArPSAiICIgKyBhdHRyaWJ1dGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIGNvbW1hbmQgPSAiZHNjYWNoZXV0aWwgLXEgZ3JvdXAgLWEgbmFtZSAiICsgZ3JvdXA7CiAgICAgICAgICAgIH0KCQl9CgkJZWxzZXsKCQkgICAgaWYodmVyYm9zZSl7CgkJICAgICAgICBjb21tYW5kID0gImRzY2wgLiBscyAvR3JvdXBzIjsKCQkgICAgICAgIGlmKGF0dHJpYnV0ZSl7CgkJICAgICAgICAgICAgY29tbWFuZCArPSAiICIgKyBhdHRyaWJ1dGU7CgkJICAgICAgICB9CgkJCX0KCQkJZWxzZXsKCQkJICAgIGNvbW1hbmQgPSAiZHNjYWNoZXV0aWwgLXEgZ3JvdXAiOwoJCQl9CgkJfQoJCXRyeXsKCQkJb3V0cHV0ID0gY3VyckFwcC5kb1NoZWxsU2NyaXB0KGNvbW1hbmQpOwoJCQlyZXR1cm4gb3V0cHV0OwoJCX0KCQljYXRjaChlcnIpewoJCQlyZXR1cm4gZXJyLnRvU3RyaW5nKCk7CgkJfQoJfQp9CmZ1bmN0aW9uIEdldF9Eb21haW5Hcm91cE1lbWJlcih7QVBJPXRydWUsIGdyb3VwPSJEb21haW4gQWRtaW5zIiwgZG9tYWluLGhlbHA9ZmFsc2UsIGxpbWl0PTB9ID0ge30pewoJaWYoaGVscCl7CgkgICAgdmFyIG91dHB1dCA9ICIiOwoJCW91dHB1dCArPSAiXFxuR2V0IGFsbCB0aGUgbWVtYmVycyBvZiBhIHNwZWNpZmljIGRvbWFpbiBncm91cCI7CgkJb3V0cHV0ICs9ICJcXG5cImdyb3VwXCIgc2hvdWxkIGJlIGEgc3BlY2lmaWMgZG9tYWluIGdyb3VwIHRvIHF1ZXJ5LiI7CgkJb3V0cHV0ICs9ICJcXG5cImRvbWFpblwiIGlzIHRoZSBORVRCSU9TIGRvbWFpbiBuYW1lIHRvIHF1ZXJ5LCBidXQgaWYgbm90IHNwZWNpZmllZCwgdGhlIGZ1bmN0aW9uIHdpbGwgZmlndXJlIGl0IG91dC4iOwoJCW91dHB1dCArPSAiXFxuY2FsbGVkOiBHZXRfRG9tYWluR3JvdXBNZW1iZXIoe2dyb3VwOlwiRG9tYWluIEFkbWluc1wifSk7IjsKCQlyZXR1cm4gb3V0cHV0OwoJfQoJLy9yZXR1cm4gbWVtYmVycyBvZiBhIHNwZWNpZmljIGRvbWFpbiBncm91cAoJaWYoIWRvbWFpbil7CgkJZG9tYWluID0gR2V0X0N1cnJlbnRORVRCSU9TRG9tYWluKEFQSSk7Cgl9CglpZiAoQVBJID09IHRydWUpewogICAgICAgIHJldHVybiBHZXRfRG9tYWluR3JvdXAoe2dyb3VwOmdyb3VwLCBhdHRyaWJ1dGU6ImRpc3Rpbmd1aXNoZWROYW1lLG1lbWJlcixtZW1iZXJPZixuZXN0ZWRncm91cHMsZ3JvdXBtZW1iZXJzaGlwIiwgbGltaXQ6bGltaXR9KTsKCX0KCWVsc2V7CgkJdHJ5ewogICAgICAgICAgICBpZihncm91cCl7CiAgICAgICAgICAgICAgICBjb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIHJlYWQgXCIvR3JvdXBzLyIgKyBncm91cCArICJcIiBHcm91cE1lbWJlcnNoaXAiOwogICAgICAgICAgICB9CgkJCWVsc2V7CgkJCSAgICBjb21tYW5kID0gImRzY2wgXCIvQWN0aXZlIERpcmVjdG9yeS8iICsgZG9tYWluICsgIi9BbGwgRG9tYWluc1wiIGxzIC9Hcm91cHMgR3JvdXBNZW1iZXJzaGlwIjsKCQkJfQoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoY29tbWFuZCk7CgkJCXJldHVybiBvdXRwdXQ7CgkJfQoJCWNhdGNoKGVycil7CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gR2V0X0xvY2FsR3JvdXBNZW1iZXIoe0FQST10cnVlLCBncm91cCxoZWxwPWZhbHNlLCBsaW1pdD0wfSA9IHt9KXsKCWlmKGhlbHApewoJICAgIHZhciBvdXRwdXQgPSAiIjsKCQlvdXRwdXQgKz0gIlxcbkdldCBhbGwgdGhlIG1lbWJlcnMgb2YgYSBzcGVjaWZpYyBsb2NhbCBncm91cCI7CgkJb3V0cHV0ICs9ICJcXG5cImdyb3VwXCIgc2hvdWxkIGJlIGEgc3BlY2lmaWMgbG9jYWwgZ3JvdXAgdG8gcXVlcnkuIjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0xvY2FsR3JvdXBNZW1iZXIoe2dyb3VwOlwiYWRtaW5cIn0pOyI7CgkJcmV0dXJuIG91dHB1dDsKCX0KCWlmIChBUEkgPT0gdHJ1ZSl7CiAgICAgICAgcmV0dXJuIEdldF9Mb2NhbEdyb3VwKHtncm91cDpncm91cCwgYXR0cmlidXRlOiJHcm91cE1lbWJlcnNoaXAsbmVzdGVkR3JvdXBzLG1lbWJlcixtZW1iZXJPZixuZXN0ZWRncm91cHMiLGxpbWl0OmxpbWl0fSk7Cgl9CgllbHNlewoJCXRyeXsKICAgICAgICAgICAgaWYoZ3JvdXApewogICAgICAgICAgICAgICAgY29tbWFuZCA9ICJkc2NsIC4gcmVhZCBcIi9Hcm91cHMvIiArIGdyb3VwICsgIlwiIEdyb3VwTWVtYmVyc2hpcCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIGNvbW1hbmQgPSAiZHNjbCAuIGxzIC9Hcm91cHMgR3JvdXBNZW1iZXJzaGlwIgogICAgICAgICAgICB9CgoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoY29tbWFuZCk7CgkJCXJldHVybiBvdXRwdXQ7CgkJfQoJCWNhdGNoKGVycil7CgkJCXJldHVybiBlcnIudG9TdHJpbmcoKTsKCQl9Cgl9Cn0KZnVuY3Rpb24gU2VhcmNoX0xvY2FsR3JvdXAoe0FQST1mYWxzZSwgYXR0cmlidXRlPSJHcm91cE1lbWJlcnNoaXAiLCB2YWx1ZT0iIiwgaGVscD1mYWxzZX0gPSB7fSl7CiAgICBpZihoZWxwKXsKICAgICAgICB2YXIgb3V0cHV0ID0gIiI7CiAgICAgICAgb3V0cHV0ICs9ICJcXG5TZWFyY2ggYSBzcGVjaWZpYyBncm91cCBhdHRyaWJ1dGUgZm9yIGEgc3BlY2lmaWMgdmFsdWUiOwogICAgICAgIG91dHB1dCArPSAiXFxuXCJhdHRyaWJ1dGVcIiBpcyBhIHNwZWNpZmljIGdyb3VwIGF0dHJpYnV0ZSB0byBzZWFyY2ggdGhyb3VnaCwgZGVmYXVsdCBpcyBcIkdyb3VwTWVtYmVyc2hpcFwiIjsKICAgICAgICBvdXRwdXQgKz0gIlxcblwidmFsdWVcIiBpcyB0aGUgdmFsdWUgdG8gc2VhcmNoIGZvciI7CiAgICAgICAgb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IFNlYXJjaF9Mb2NhbEdyb3Vwcyh7YXR0cmlidXRlOlwiR3JvdXBNZW1iZXJzaGlwXCIsIHZhbHVlOlwidXNlcm5hbWVcIn0pOyI7CiAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgIH0KICAgIGlmIChBUEkgPT0gdHJ1ZSl7CiAgICAgICAgcmV0dXJuICJBUEkgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZCB5ZXQiOwogICAgfQogICAgZWxzZXsKICAgICAgICB0cnl7CiAgICAgICAgICAgIGNvbW1hbmQgPSAiZHNjbCAuIC1zZWFyY2ggL0dyb3VwcyAiICsgYXR0cmlidXRlICsgIiAiICsgdmFsdWU7CiAgICAgICAgICAgIG91dHB1dCA9IGN1cnJBcHAuZG9TaGVsbFNjcmlwdChjb21tYW5kKTsKICAgICAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgICAgICB9Y2F0Y2goZXJyKXsKICAgICAgICAgICAgcmV0dXJuIGVyci50b1N0cmluZygpOwogICAgICAgIH0KICAgIH0KfQpmdW5jdGlvbiBTZWFyY2hfRG9tYWluR3JvdXAoe0FQST1mYWxzZSwgYXR0cmlidXRlPSJHcm91cE1lbWJlcnNoaXAiLCB2YWx1ZT0iIiwgaGVscD1mYWxzZSwgZG9tYWlufSA9IHt9KXsKICAgIGlmKGhlbHApewogICAgICAgIHZhciBvdXRwdXQgPSAiIjsKICAgICAgICBvdXRwdXQgKz0gIlxcblNlYXJjaCBhIHNwZWNpZmljIGdyb3VwIGF0dHJpYnV0ZSBmb3IgYSBzcGVjaWZpYyB2YWx1ZSI7CiAgICAgICAgb3V0cHV0ICs9ICJcXG5cImF0dHJpYnV0ZVwiIGlzIGEgc3BlY2lmaWMgZ3JvdXAgYXR0cmlidXRlIHRvIHNlYXJjaCB0aHJvdWdoLCBkZWZhdWx0IGlzIFwiR3JvdXBNZW1iZXJzaGlwXCIiOwogICAgICAgIG91dHB1dCArPSAiXFxuXCJ2YWx1ZVwiIGlzIHRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yIjsKICAgICAgICBvdXRwdXQgKz0gIlxcbmNhbGxlZDogU2VhcmNoX0RvbWFpbkdyb3Vwcyh7YXR0cmlidXRlOlwiR3JvdXBNZW1iZXJzaGlwXCIsIHZhbHVlOlwidXNlcm5hbWVcIn0pOyI7CiAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgIH0KICAgIGlmKCFkb21haW4pewoJCWRvbWFpbiA9IEdldF9DdXJyZW50TkVUQklPU0RvbWFpbihBUEkpOwoJfQogICAgaWYgKEFQSSA9PSB0cnVlKXsKICAgICAgICByZXR1cm4gIkFQSSBtZXRob2Qgbm90IGltcGxlbWVudGVkIHlldCI7CiAgICB9CiAgICBlbHNlewogICAgICAgIGNvbW1hbmQgPSAiZHNjbCBcIi9BY3RpdmUgRGlyZWN0b3J5LyIgKyBkb21haW4gKyAiL0FsbCBEb21haW5zXCIgLXNlYXJjaCAvR3JvdXBzICIgKyBhdHRyaWJ1dGUgKyAiICIgKyB2YWx1ZTsKICAgICAgICB0cnl7CiAgICAgICAgICAgIG91dHB1dCA9IGN1cnJBcHAuZG9TaGVsbFNjcmlwdChjb21tYW5kKTsKICAgICAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgICAgICB9CiAgICAgICAgY2F0Y2goZXJyb3IpewogICAgICAgICAgICByZXR1cm4gZXJyb3IudG9TdHJpbmcoKTsKICAgICAgICB9CiAgICB9Cn0KZnVuY3Rpb24gU2VhcmNoX0xvY2FsVXNlcih7QVBJPWZhbHNlLCBhdHRyaWJ1dGU9IlVzZXJTaGVsbCIsIHZhbHVlPSIvYmluL2Jhc2giLCBoZWxwPWZhbHNlfSA9IHt9KXsKICAgIGlmKGhlbHApewogICAgICAgIHZhciBvdXRwdXQgPSAiIjsKICAgICAgICBvdXRwdXQgKz0gIlxcblNlYXJjaCBsb2NhbCB1c2VycyBhdHRyaWJ1dGUgZm9yIGEgc3BlY2lmaWMgdmFsdWUiOwogICAgICAgIG91dHB1dCArPSAiXFxuXCJhdHRyaWJ1dGVcIiBpcyBhIHNwZWNpZmljIHVzZXIgYXR0cmlidXRlIHRvIHNlYXJjaCB0aHJvdWdoLCBkZWZhdWx0IGlzIFwiVXNlclNoZWxsXCIiOwogICAgICAgIG91dHB1dCArPSAiXFxuXCJ2YWx1ZVwiIGlzIHRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLCBkZWZhdWx0IGlzIFwiL2Jpbi9iYXNoXCIiOwogICAgICAgIG91dHB1dCArPSAiXFxuY2FsbGVkOiBTZWFyY2hfTG9jYWxVc2Vycyh7YXR0cmlidXRlOlwiVXNlclNoZWxsXCIsIHZhbHVlOlwiL2Jpbi9iYXNoXCJ9KTsiOwogICAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9CiAgICBpZiAoQVBJID09IHRydWUpewogICAgICAgIHJldHVybiAiQVBJIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQgeWV0IjsKICAgIH0KICAgIGVsc2V7CiAgICAgICAgdHJ5ewogICAgICAgICAgICBjb21tYW5kID0gImRzY2wgLiAtc2VhcmNoIC9Vc2VycyAiICsgYXR0cmlidXRlICsgIiAiICsgdmFsdWU7CiAgICAgICAgICAgIG91dHB1dCA9IGN1cnJBcHAuZG9TaGVsbFNjcmlwdChjb21tYW5kKTsKICAgICAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgICAgICB9Y2F0Y2goZXJyKXsKICAgICAgICAgICAgcmV0dXJuIGVyci50b1N0cmluZygpOwogICAgICAgIH0KICAgIH0KfQpmdW5jdGlvbiBTZWFyY2hfRG9tYWluVXNlcih7QVBJPWZhbHNlLCBhdHRyaWJ1dGU9IiIsIHZhbHVlPSIiLCBoZWxwPWZhbHNlLCBkb21haW59ID0ge30pewogICAgaWYoaGVscCl7CiAgICAgICAgdmFyIG91dHB1dCA9ICIiOwogICAgICAgIG91dHB1dCArPSAiXFxuU2VhcmNoIGEgc3BlY2lmaWMgZ3JvdXAgYXR0cmlidXRlIGZvciBhIHNwZWNpZmljIHZhbHVlIjsKICAgICAgICBvdXRwdXQgKz0gIlxcblwiYXR0cmlidXRlXCIgaXMgYSBzcGVjaWZpYyB1c2VyIGF0dHJpYnV0ZSB0byBzZWFyY2ggdGhyb3VnaCwgZGVmYXVsdCBpcyBcIlwiIjsKICAgICAgICBvdXRwdXQgKz0gIlxcblwidmFsdWVcIiBpcyB0aGUgdmFsdWUgdG8gc2VhcmNoIGZvciI7CiAgICAgICAgb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IFNlYXJjaF9Eb21haW5Vc2Vycyh7YXR0cmlidXRlOlwiXCIsIHZhbHVlOlwidXNlcm5hbWVcIn0pOyI7CiAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgIH0KICAgIGlmKCFkb21haW4pewoJCWRvbWFpbiA9IEdldF9DdXJyZW50TkVUQklPU0RvbWFpbihBUEkpOwoJfQogICAgaWYgKEFQSSA9PSB0cnVlKXsKICAgICAgICByZXR1cm4gIkFQSSBtZXRob2Qgbm90IGltcGxlbWVudGVkIHlldCI7CiAgICB9CiAgICBlbHNlewogICAgICAgIGNvbW1hbmQgPSAiZHNjbCBcIi9BY3RpdmUgRGlyZWN0b3J5LyIgKyBkb21haW4gKyAiL0FsbCBEb21haW5zXCIgLXNlYXJjaCAvVXNlcnMgIiArIGF0dHJpYnV0ZSArICIgIiArIHZhbHVlOwogICAgICAgIHRyeXsKICAgICAgICAgICAgb3V0cHV0ID0gY3VyckFwcC5kb1NoZWxsU2NyaXB0KGNvbW1hbmQpOwogICAgICAgICAgICByZXR1cm4gb3V0cHV0OwogICAgICAgIH0KICAgICAgICBjYXRjaChlcnJvcil7CiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpOwogICAgICAgIH0KICAgIH0KfQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vIEhFTFBFUiBGVU5DVElPTlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwpmdW5jdGlvbiBHZXRfQ3VycmVudERvbWFpbihBUEk9dHJ1ZSxoZWxwPWZhbHNlKXsKCWlmKGhlbHApewoJICAgIHZhciBvdXRwdXQgPSAiIjsKCQlvdXRwdXQgKz0gIlxcbkdldCB0aGUgZnVsbHkgcXVhbGlmaWVkIGN1cnJlbnQgZG9tYWluIjsKCQlvdXRwdXQgKz0gIlxcbmNhbGxlZDogR2V0X0N1cnJlbnREb21haW4oKTsiOwoJCXJldHVybiBvdXRwdXQ7Cgl9CglpZihBUEkgPT0gdHJ1ZSl7CgkJdmFyIGNvbmZpZyA9IEdldF9PRF9Ob2RlX0NvbmZpZ3VyYXRpb24oKTsKCQl2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZyk7CgkJZm9yKHZhciBpIGluIGtleXMpewoJCQlpZihjb25maWdba2V5c1tpXV1bJ25vZGVOYW1lJ10gIT0gIkNvbnRhY3RzIiAmJiBjb25maWdba2V5c1tpXV1bJ25vZGVOYW1lJ10gIT0gIlNlYXJjaCIgJiYgY29uZmlnW2tleXNbaV1dWydub2RlTmFtZSddKXsKCQkJCXJldHVybiBjb25maWdba2V5c1tpXV1bJ3RydXN0S2VyYmVyb3NQcmluY2lwYWwnXS5zcGxpdCgiQCIpWzFdOwoJCQl9CgkJfQoJCXJldHVybiAiTm8gZG9tYWluIGZvdW5kIjsKCX0KCWVsc2V7CgkJdHJ5ewoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoImRzY29uZmlnYWQgLXNob3ciKTsKCQkJLy9BY3RpdmUgRGlyZWN0b3J5IEZvcmVzdCAJCT0gZm9yZXN0LnRsZAoJCQkvL0FjdGl2ZSBEaXJlY3RvcnkgRG9tYWluIAkJPSBkb21haW4udGxkCgkJCS8vQ29tcHV0ZXIgQWNjb3VudCAJCQkJPSBjb21wdXRlci1uYW1lCgkJCS8vYSBidW5jaCBvZiBvdGhlcnMgd2l0aCAoc29tZXRoaW5nID0gc29tZXRoaW5nKSBmb3JtYXQKCQkJLy9Mb29rIGludG8gQWR2YW5jZWQgT3B0aW9ucyAtIEFkbWluaXN0cmF0aXZlCgkJCS8vCXByZWZlcnJlZCBkb21haW4gY29udHJvbGxlciwgYWxsb3dlZCBhZG1pbiBncm91cAoJCQljb21wb25lbnRzID0gb3V0cHV0LnNwbGl0KCJcciIpOwoJCQlkb21haW4gPSBjb21wb25lbnRzWzFdLnNwbGl0KCI9IilbMV0udHJpbSgpOwoJCQlyZXR1cm4gZG9tYWluOwoJCX0KCQljYXRjaChlcnIpewoJCQlyZXR1cm4gZXJyLnRvU3RyaW5nKCk7CgkJfQoJfQp9CmZ1bmN0aW9uIEdldF9DdXJyZW50TkVUQklPU0RvbWFpbihBUEk9dHJ1ZSxoZWxwPWZhbHNlKXsKCWlmKGhlbHApewoJICAgIGxldCBvdXRwdXQgPSAiIjsKCQlvdXRwdXQgKz0gIlxcbkdldCB0aGUgTkVUQklPUyBuYW1lIG9mIHRoZSBjdXJyZW50IGRvbWFpbiI7CgkJb3V0cHV0ICs9ICJcXG5jYWxsZWQ6IEdldF9DdXJyZW50TkVUQklPU0RvbWFpbigpOyI7CgkJcmV0dXJuIG91dHB1dDsKCX0KCWlmKEFQSSA9PSB0cnVlKXsKICAgICAgICBsZXQgY29uZmlnID0gR2V0X09EX05vZGVfQ29uZmlndXJhdGlvbigpOwoJCWxldCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKTsKCQlmb3IobGV0IGkgaW4ga2V5cyl7CgkJCWlmKGNvbmZpZ1trZXlzW2ldXS5oYXNPd25Qcm9wZXJ0eSgnbm9kZU5hbWUnKSAmJiBjb25maWdba2V5c1tpXV1bJ25vZGVOYW1lJ10gIT0gIkNvbnRhY3RzIiAmJiBjb25maWdba2V5c1tpXV1bJ25vZGVOYW1lJ10gIT0gIlNlYXJjaCIpewoJCQkJcmV0dXJuIGNvbmZpZ1trZXlzW2ldXVsnbm9kZU5hbWUnXTsKCQkJfQoJCX0KCQlyZXR1cm4gIk5vIERvbWFpbiBGb3VuZCI7Cgl9CgllbHNlewoJCXRyeXsKCQkJbGV0IG91dHB1dCA9IGN1cnJBcHAuZG9TaGVsbFNjcmlwdCgiZWNobyBzaG93IGNvbS5hcHBsZS5vcGVuZGlyZWN0b3J5ZC5BY3RpdmVEaXJlY3RvcnkgfCBzY3V0aWwiKTsKCQkJLy88ZGljdGlvbmFyeT57CgkJCS8vRG9tYWluRm9yZXN0TmFtZSA6IHRlc3QubG9jYWwKCQkJLy9Eb21haW5HdWlkIDogMDFGRENBQ0MtQzg5RC00NUI4LTg4MjktM0JBQjU0NDkwRjZDCgkJCS8vRG9tYWluTmFtZURucyA6IHRlc3QubG9jYWwKCQkJLy9Eb21haW5OYW1lRmxhdCA6IFRFU1QKCQkJLy9NYWNoaW5lUm9sZSA6IDMKCQkJLy9Ob2RlTmFtZTogL0FjdGl2ZSBEaXJlY3RvcnkvVEVTVAoJCQkvL1RydXN0QWNjb3VudCA6IHRlc3RtYWMkCgkJCS8vfQoJCQljb21wb25lbnRzID0gb3V0cHV0LnNwbGl0KCJcciIpOwoJCQlkb21haW4gPSBjb21wb25lbnRzWzRdLnNwbGl0KCI6IilbMV0udHJpbSgpOwoJCQlyZXR1cm4gZG9tYWluOwoJCX0KCQljYXRjaChlcnIpewoJCQlyZXR1cm4gZXJyLnRvU3RyaW5nKCk7CgkJfQoJfQp9CmZ1bmN0aW9uIEdldF9Gb3Jlc3QoQVBJPWZhbHNlLGhlbHA9ZmFsc2UpewoJaWYoaGVscCl7CgkgICAgdmFyIG91dHB1dCA9ICIiOwoJCW91dHB1dCArPSAiXFxuR2V0IHRoZSBmdWxseSBxdWFsaWZpZWQgZm9yZXN0IG5hbWUiOwoJCW91dHB1dCArPSAiXFxuY2FsbGVkOiBHZXRfRm9yZXN0KCk7IjsKCQlyZXR1cm4gb3V0cHV0OwoJfQoJaWYoQVBJID09IHRydWUpewogICAgICAgIHJldHVybiAiQVBJIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQgeWV0IjsKCX0KCWVsc2V7CgkJdHJ5ewoJCQlvdXRwdXQgPSBjdXJyQXBwLmRvU2hlbGxTY3JpcHQoImRzY29uZmlnYWQgLXNob3ciKTsKCQkJLy9BY3RpdmUgRGlyZWN0b3J5IEZvcmVzdCAJCT0gZm9yZXN0LnRsZAoJCQkvL0FjdGl2ZSBEaXJlY3RvcnkgRG9tYWluIAkJPSBkb21haW4udGxkCgkJCS8vQ29tcHV0ZXIgQWNjb3VudCAJCQkJPSBjb21wdXRlci1uYW1lCgkJCS8vYSBidW5jaCBvZiBvdGhlcnMgd2l0aCAoc29tZXRoaW5nID0gc29tZXRoaW5nKSBmb3JtYXQKCQkJLy9Mb29rIGludG8gQWR2YW5jZWQgT3B0aW9ucyAtIEFkbWluaXN0cmF0aXZlCgkJCS8vCXByZWZlcnJlZCBkb21haW4gY29udHJvbGxlciwgYWxsb3dlZCBhZG1pbiBncm91cAoJCQljb21wb25lbnRzID0gb3V0cHV0LnNwbGl0KCJcciIpOwoJCQlmb3Jlc3QgPSBjb21wb25lbnRzWzBdLnNwbGl0KCI9IilbMV0udHJpbSgpOwoJCQlyZXR1cm4gZm9yZXN0OwoJCX0KCQljYXRjaChlcnIpewoJCQlyZXR1cm4gZXJyLnRvU3RyaW5nKCk7CgkJfQoJfQp9CmZ1bmN0aW9uIG1haW4oKXsKICAgIEdldF9Mb2NhbFVzZXIoKTsKICAgIEdldF9Mb2NhbEdyb3VwKCk7CiAgICBHZXRfTG9jYWxHcm91cE1lbWJlcigpOwoKICAgIC8vLS0gRmV0Y2ggZnJvbSBGb3Jlc3QKICAgIEdldF9Gb3Jlc3QoKTsKICAgIEdldF9Eb21haW5Hcm91cE1lbWJlcigpOwogICAgR2V0X0RvbWFpbkdyb3VwKCk7CiAgICBHZXRfRG9tYWluVXNlcigpOwogICAgR2V0X0RvbWFpbkNvbXB1dGVyKCk7CiAgICBHZXRfQ3VycmVudERvbWFpbigpOwogICAgR2V0X0N1cnJlbnRORVRCSU9TRG9tYWluKCk7CiAgICBHZXRfRm9yZXN0KCk7Cn0KCm1haW4oKTsK"""
    try:
        args = ["osascript","-l","JavaScript","-e",base64.b64decode(encoded)]
        process = run(args,stdout=PIPE,stderr=STDOUT,text=True,errors="ignore")
        data = process.stdout
        if data == "":
            vprint("No Active Directory discovered")
        else:
            vprint(data)
    except Exception as e:
        vprint(f"Error: Exception Raised: {e}")
    
    
def main():
    global result
    result = []
    runOrchard()
    return result

if __name__ == "__main__":
    main()